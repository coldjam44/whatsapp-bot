<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message Editor - Bot Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: #667eea;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .nav {
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        .nav a {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            margin-right: 20px;
        }
        .nav a:hover {
            color: #5a6fd8;
        }
        .content {
            padding: 30px;
        }
        .editor-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }
        .editor-section h3 {
            margin-top: 0;
            color: #495057;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #495057;
        }
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .form-group textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            font-family: Arial, sans-serif;
            resize: vertical;
        }
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .btn-warning {
            background: #ffc107;
            color: black;
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        .preview-section {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        .preview-section h4 {
            margin-top: 0;
            color: #1976d2;
        }
        .preview-message {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            font-family: Arial, sans-serif;
            white-space: pre-wrap;
            min-height: 100px;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        .message-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .message-type {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .message-type:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        .message-type.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        .message-type h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }
        .message-type p {
            margin: 0;
            font-size: 12px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ Yes/No Conversation Templates</h1>
            <p>Create and manage different conversation flow templates for any business</p>
        </div>
        
        <div class="nav">
            <a href="/">ğŸ  Dashboard</a>
            <a href="/spreadsheet">ğŸ“Š Spreadsheet</a>
            <a href="/message-editor">ğŸ“ Message Editor</a>
            <a href="/template-manager">âš™ï¸ Template Manager</a>
        </div>
        
        <div class="content">
            <div id="status" class="status"></div>
            
            <!-- Template Management -->
            <div class="editor-section">
                <h3>ğŸ“‹ Template Management</h3>
                <div style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="form-group" style="flex: 1; min-width: 200px;">
                        <label for="templateSelect">Select Template:</label>
                        <select id="templateSelect" onchange="loadTemplate()">
                            <option value="luxury">ğŸ° Luxury Properties</option>
                            <option value="firsttime">ğŸ  First-Time Buyers</option>
                            <option value="expat">ğŸŒ Expat Relocation</option>
                            <option value="investor">ğŸ’ Smart Investors</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 1; min-width: 200px;">
                        <label for="newTemplateName">Create New Template:</label>
                        <input type="text" id="newTemplateName" placeholder="Template name..." style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                    </div>
                    <div style="display: flex; gap: 10px; align-items: end;">
                        <button class="btn btn-success" onclick="createNewTemplate()">â• Create</button>
                        <button class="btn btn-primary" onclick="setAsDefault()">â­ Set as Default</button>
                        <button class="btn btn-warning" onclick="duplicateTemplate()">ğŸ“‹ Duplicate</button>
                        <button class="btn btn-danger" onclick="deleteTemplate()">ğŸ—‘ï¸ Delete</button>
                    </div>
                </div>
            </div>
            
            <!-- Instructions -->
            <div class="editor-section" style="background: #f8f9fa; border-left: 4px solid #007bff;">
                <h3>ğŸ“‹ Important Instructions</h3>
                <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <h4 style="color: #dc3545; margin-top: 0;">âš ï¸ Required Elements:</h4>
                    <ul style="color: #333; line-height: 1.8;">
                        <li><strong>[NAME]</strong> - Must include this placeholder in fire messages to personalize with contact name</li>
                        <li><strong>1 for Yes</strong> - Users must respond with "1" for yes/positive responses</li>
                        <li><strong>2 for No</strong> - Users must respond with "2" for no/negative responses</li>
                        <li><strong>Arabic & English</strong> - All messages must be bilingual (Arabic then English)</li>
                    </ul>
                    
                    <h4 style="color: #28a745; margin-top: 20px;">âœ… Template Structure:</h4>
                    <ol style="color: #333; line-height: 1.8;">
                        <li><strong>Fire Message:</strong> Initial bulk message with [NAME] placeholder</li>
                        <li><strong>Language Selection:</strong> Ask user to choose Arabic or English</li>
                        <li><strong>Yes Response:</strong> Message when user sends "1"</li>
                        <li><strong>No Response:</strong> Message when user sends "2"</li>
                        <li><strong>Details Request:</strong> Ask for specific information</li>
                        <li><strong>Updates Confirmed:</strong> When user wants updates</li>
                        <li><strong>Updates Declined:</strong> When user doesn't want updates</li>
                        <li><strong>Thank You:</strong> Final confirmation message</li>
                    </ol>
                </div>
            </div>
            
            <!-- Language Selection -->
            <div class="editor-section">
                <h3>ğŸŒ Language Selection</h3>
                <div class="form-group">
                    <label for="language">Select Language to Edit:</label>
                    <select id="language" onchange="loadAllMessages()">
                        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
            
            <!-- Complete Flow Editor -->
            <div class="editor-section">
                <h3>âœï¸ Edit Complete Flow</h3>
                
                <!-- Fire Message -->
                <div class="form-group">
                    <label for="fireMessage">ğŸ”¥ Fire Message (Bulk Message):</label>
                    <textarea id="fireMessage" placeholder="Initial bulk message sent to all contacts..."></textarea>
                </div>
                
                <!-- Fire Message Response -->
                <div class="form-group">
                    <label for="chooseLang">ğŸŒ Language Selection Message:</label>
                    <textarea id="chooseLang" placeholder="Message when user responds to fire message..."></textarea>
                </div>
                
                <!-- Yes Response -->
                <div class="form-group">
                    <label for="yesResponse">âœ… Yes Response (User says Yes):</label>
                    <textarea id="yesResponse" placeholder="Message when user says Yes..."></textarea>
                </div>
                
                <!-- No Response -->
                <div class="form-group">
                    <label for="noResponse">âŒ No Response (User says No):</label>
                    <textarea id="noResponse" placeholder="Message when user says No..."></textarea>
                </div>
                
                <!-- Details Request -->
                <div class="form-group">
                    <label for="askDetails">ğŸ“ Details Request:</label>
                    <textarea id="askDetails" placeholder="Message asking for details..."></textarea>
                </div>
                
                <!-- Updates Confirmed -->
                <div class="form-group">
                    <label for="updatesConfirmed">ğŸ“‹ Updates Confirmed:</label>
                    <textarea id="updatesConfirmed" placeholder="Message when user wants updates..."></textarea>
                </div>
                
                <!-- Updates Declined -->
                <div class="form-group">
                    <label for="updatesDeclined">ğŸš« Updates Declined:</label>
                    <textarea id="updatesDeclined" placeholder="Message when user doesn't want updates..."></textarea>
                </div>
                
                <!-- Thank You -->
                <div class="form-group">
                    <label for="thank">ğŸ™ Thank You Message:</label>
                    <textarea id="thank" placeholder="Final thank you message..."></textarea>
                </div>
                
                       <!-- Action Buttons -->
                       <div class="form-group">
                           <button class="btn btn-info" onclick="validateTemplate()">ğŸ” Validate Template</button>
                           <button class="btn btn-success" onclick="saveAllMessages()">ğŸ’¾ Save Complete Flow</button>
                           <button class="btn btn-warning" onclick="resetAllMessages()">ğŸ”„ Reset All to Default</button>
                           <button class="btn btn-primary" onclick="previewCompleteFlow()">ğŸ‘ï¸ Preview Complete Flow</button>
                       </div>
            </div>
            
            <!-- Flow Preview -->
            <div class="preview-section">
                <h4>ğŸ‘ï¸ Complete Flow Preview</h4>
                <div id="flowPreview" class="preview-message">
                    Select a language and click "Preview Complete Flow" to see the entire conversation flow...
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'ar';
        let currentTemplate = 'luxury';
        
        // Business templates
        const businessTemplates = {
            luxury: {
                ar: {
                    fireMessage: "ğŸ° Ù…Ø±Ø­Ø¨Ø§Ù‹ [NAME] ğŸ‘‹\nÙ†Ø­Ù† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø© ÙÙŠ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ.\nÙ‡Ù„ ØªÙ…Ù„Ùƒ Ø¹Ù‚Ø§Ø±Ø§Ù‹ ÙØ§Ø®Ø±Ø§Ù‹ Ø£Ùˆ ØªØ¨Ø­Ø« Ø¹Ù† Ø¹Ù‚Ø§Ø± Ø±Ø§Ù‚ÙŠØŸ\n\nÙ„Ù„Ù†Ø¹Ù… Ø£Ø±Ø³Ù„ 1ØŒ Ù„Ù„Ù„Ø§ Ø£Ø±Ø³Ù„ 2\n\nâœ¨ Ù†Ø­Ù† Ù†ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© ÙÙ‚Ø·\nğŸ° Luxury Properties Specialist\n\nğŸ° Hello [NAME] ğŸ‘‹\nWe specialize in luxury properties in Abu Dhabi.\nDo you own a luxury property or are you looking for an exclusive property?\n\nFor yes send 1, for no send 2\n\nâœ¨ We deal with premium properties only\nğŸ° Luxury Properties Specialist",
                    chooseLang: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸŒŸ\nØ±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§\n\nWelcome ğŸŒŸ\nPlease choose language:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§",
                    yesResponse: "ğŸ° Ù…Ù…ØªØ§Ø²! Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø© ğŸ™\n\nÙ„Ù†Ù‚Ø¯Ù… Ù„Ùƒ Ø£ÙØ¶Ù„ Ø®Ø¯Ù…Ø©ØŒ Ù†ÙˆØ¯ Ù…Ø¹Ø±ÙØ© ØªÙØ§ØµÙŠÙ„ Ø¹Ù‚Ø§Ø±Ùƒ Ø§Ù„ÙØ§Ø®Ø±:\nâœ¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù…ÙŠØ²\nğŸ° Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø± (ÙÙŠÙ„Ø§ Ø±Ø§Ù‚ÙŠØ©ØŒ Ø¨Ù†ØªÙ‡Ø§ÙˆØ³ØŒ Ù‚ØµØ±ØŒ Ø¥Ù„Ø®)\nğŸ’° Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©\n\nğŸ”’ Ø®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø© - Ù„Ù† ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ùƒ Ù‡Ø§ØªÙÙŠØ§Ù‹\nğŸ’ Ø®Ø¯Ù…Ø© VIP Ø­ØµØ±ÙŠØ© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨\n\nØ£Ø±Ø³Ù„ 1 Ù„Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø¹Ù‚Ø§Ø±Ùƒ Ø§Ù„ÙØ§Ø®Ø±",
                    noResponse: "ğŸŒŸ Ù„Ø§ Ù…Ø´ÙƒÙ„Ø©! Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙˆØ¶ÙŠØ­Ùƒ\n\nØ¥Ø°Ø§ ÙƒÙ†Øª Ù…Ù‡ØªÙ…Ø§Ù‹ Ø¨Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø© ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ØŒ\nÙŠÙ…ÙƒÙ†Ù†Ø§ Ø¥Ø±Ø³Ø§Ù„ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ù„Ùƒ:\n\nğŸ° ÙÙŠÙ„Ø§Øª Ø±Ø§Ù‚ÙŠØ©\nğŸ™ï¸ Ø¨Ù†ØªÙ‡Ø§ÙˆØ³ Ø­ØµØ±ÙŠØ©\nğŸ–ï¸ Ø¹Ù‚Ø§Ø±Ø§Øª Ø³Ø§Ø­Ù„ÙŠØ©\n\nğŸ”” Ø¥Ø´Ø¹Ø§Ø±Ø§Øª VIP Ø­ØµØ±ÙŠØ© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙÙ‚Ø·\n\nØ£Ø±Ø³Ù„ 1 Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø©\nØ£Ø±Ø³Ù„ 2 Ù„Ù„Ø±ÙØ¶",
                    askDetails: "ğŸ° Ø±Ø§Ø¦Ø¹! ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø¹Ù‚Ø§Ø±Ùƒ Ø§Ù„ÙØ§Ø®Ø±:\n\nâœ¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù…ÙŠØ² (Ù…Ø«Ù„: Ø¬Ø²ÙŠØ±Ø© Ø§Ù„Ø±ÙŠÙ…ØŒ Ù…Ø§Ø±ÙŠÙ†Ø§ØŒ ÙƒÙˆØ±Ù†ÙŠØ´)\nğŸ° Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø± (ÙÙŠÙ„Ø§ Ø±Ø§Ù‚ÙŠØ©ØŒ Ø¨Ù†ØªÙ‡Ø§ÙˆØ³ØŒ Ù‚ØµØ±ØŒ Ø¥Ù„Ø®)\nğŸ“ Ø§Ù„Ù…Ø³Ø§Ø­Ø© (Ù…ØªØ± Ù…Ø±Ø¨Ø¹)\nğŸ’° Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©\nğŸŒŸ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø®Ø§ØµØ© (Ù…Ø³Ø¨Ø­ØŒ Ø­Ø¯ÙŠÙ‚Ø©ØŒ Ø¥Ø·Ù„Ø§Ù„Ø©ØŒ Ø¥Ù„Ø®)\n\nğŸ’ Ø³Ù†Ù‚ÙˆÙ… Ø¨ØªÙ‚ÙŠÙŠÙ… Ø¹Ù‚Ø§Ø±Ùƒ ÙˆØªÙ‚Ø¯ÙŠÙ… Ø£ÙØ¶Ù„ Ø¹Ø±Ø¶",
                    updatesConfirmed: "ğŸ° Ù…Ù…ØªØ§Ø²! ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© VIP Ù„Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø© âœ¨\n\nØ³ØªØµÙ„Ùƒ:\nğŸ° Ø£Ø­Ø¯Ø« Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©\nğŸ’ Ø¹Ø±ÙˆØ¶ Ø­ØµØ±ÙŠØ©\nğŸŒŸ ÙØ±Øµ Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø±Ø§Ù‚ÙŠØ©\n\nğŸ”” Ø¥Ø´Ø¹Ø§Ø±Ø§Øª VIP Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙÙ‚Ø·",
                    updatesDeclined: "ğŸŒŸ Ù„Ø§ Ù…Ø´ÙƒÙ„Ø©! Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ ğŸ™\n\nØ¥Ø°Ø§ ØºÙŠØ±Øª Ø±Ø£ÙŠÙƒ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ØŒ\nÙ†Ø­Ù† Ù‡Ù†Ø§ Ù„Ø®Ø¯Ù…ØªÙƒ ÙÙŠ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø© ğŸ°",
                    thank: "ğŸ° Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª VIP âœ¨\n\nØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù„ØªÙ‚ÙŠÙŠÙ… Ø¹Ù‚Ø§Ø±Ùƒ Ø§Ù„ÙØ§Ø®Ø±\nğŸ’ Ø®Ø¯Ù…Ø© VIP Ø­ØµØ±ÙŠØ©"
            },
            en: {
                fireMessage: "ğŸ° Hello [NAME] ğŸ‘‹\nWe specialize in luxury properties in Abu Dhabi.\nDo you own a luxury property or are you looking for an exclusive property?\n\nFor yes send 1, for no send 2\n\nâœ¨ We deal with premium properties only\nğŸ° Luxury Properties Specialist\n\nğŸ° Ù…Ø±Ø­Ø¨Ø§Ù‹ [NAME] ğŸ‘‹\nÙ†Ø­Ù† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø© ÙÙŠ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ.\nÙ‡Ù„ ØªÙ…Ù„Ùƒ Ø¹Ù‚Ø§Ø±Ø§Ù‹ ÙØ§Ø®Ø±Ø§Ù‹ Ø£Ùˆ ØªØ¨Ø­Ø« Ø¹Ù† Ø¹Ù‚Ø§Ø± Ø±Ø§Ù‚ÙŠØŸ\n\nÙ„Ù„Ù†Ø¹Ù… Ø£Ø±Ø³Ù„ 1ØŒ Ù„Ù„Ù„Ø§ Ø£Ø±Ø³Ù„ 2\n\nâœ¨ Ù†Ø­Ù† Ù†ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø© ÙÙ‚Ø·\nğŸ° Luxury Properties Specialist",
                chooseLang: "Welcome ğŸŒŸ\nPlease choose language:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§\n\nØ£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸŒŸ\nØ±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§",
                yesResponse: "ğŸ° Excellent! Thank you for choosing luxury properties ğŸ™\n\nTo provide you with the best service, we'd like to know about your luxury property:\nâœ¨ Exclusive location\nğŸ° Property type (luxury villa, penthouse, mansion, etc.)\nğŸ’° Expected value\n\nğŸ”’ Complete privacy - no phone calls\nğŸ’ VIP service exclusively via WhatsApp\n\nSend 1 to share your luxury property details",
                noResponse: "ğŸŒŸ No problem! Thank you for clarifying\n\nIf you're interested in luxury properties in the future,\nwe can send you the latest exclusive properties:\n\nğŸ° Luxury villas\nğŸ™ï¸ Exclusive penthouses\nğŸ–ï¸ Waterfront properties\n\nğŸ”” VIP notifications exclusively via WhatsApp\n\nSend 1 to agree to luxury notifications\nSend 2 to decline",
                askDetails: "ğŸ° Wonderful! Please share your luxury property details:\n\nâœ¨ Exclusive location (e.g., Al Reem Island, Marina, Corniche)\nğŸ° Property type (luxury villa, penthouse, mansion, etc.)\nğŸ“ Area (square meters)\nğŸ’° Expected value\nğŸŒŸ Special features (pool, garden, view, etc.)\n\nğŸ’ We'll evaluate your property and provide the best offer",
                updatesConfirmed: "ğŸ° Excellent! You've been added to our VIP luxury properties list âœ¨\n\nYou'll receive:\nğŸ° Latest exclusive properties\nğŸ’ Special offers\nğŸŒŸ Premium investment opportunities\n\nğŸ”” VIP notifications via WhatsApp only",
                updatesDeclined: "ğŸŒŸ No problem! Thank you ğŸ™\n\nIf you change your mind in the future,\nwe're here to serve you in luxury properties ğŸ°",
                thank: "ğŸ° Thank you! Your information has been registered in our VIP database âœ¨\n\nWe'll contact you soon to evaluate your luxury property\nğŸ’ Exclusive VIP service"
                }
            },
            firsttime: {
                ar: {
                    fireMessage: "ğŸ  Ù…Ø±Ø­Ø¨Ø§Ù‹ [NAME] ğŸ‘‹\nÙ†Ø­Ù† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ† Ù„Ø£ÙˆÙ„ Ù…Ø±Ø© ÙÙŠ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ!\nÙ‡Ù„ ØªÙÙƒØ± ÙÙŠ Ø´Ø±Ø§Ø¡ Ø£ÙˆÙ„ Ø¹Ù‚Ø§Ø± Ù„ÙƒØŸ\n\nÙ„Ù„Ù†Ø¹Ù… Ø£Ø±Ø³Ù„ 1ØŒ Ù„Ù„Ù„Ø§ Ø£Ø±Ø³Ù„ 2\n\nğŸ¯ Ù†Ù‚Ø¯Ù… Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ø´ØªØ±ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯\nğŸ  First-Time Buyer Specialists\n\nğŸ  Hello [NAME] ğŸ‘‹\nWe specialize in helping first-time buyers in Abu Dhabi!\nAre you thinking of buying your first property?\n\nFor yes send 1, for no send 2\n\nğŸ¯ We provide complete support for new buyers\nğŸ  First-Time Buyer Specialists",
                    chooseLang: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸŒŸ\nØ±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§\n\nWelcome ğŸŒŸ\nPlease choose language:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§",
                    yesResponse: "ğŸ  Ø±Ø§Ø¦Ø¹! Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø±Ø­Ù„Ø© Ø´Ø±Ø§Ø¡ Ø£ÙˆÙ„ Ø¹Ù‚Ø§Ø± Ù„Ùƒ! ğŸ‰\n\nÙ†Ø­Ù† Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ ÙƒÙ„ Ø®Ø·ÙˆØ©:\nğŸ  Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (Ø´Ù‚Ø©ØŒ ÙÙŠÙ„Ø§ØŒ Ø§Ø³ØªÙˆØ¯ÙŠÙˆ)\nğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ÙØ¶Ù„\nğŸ’° Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©\nğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©\n\nğŸ¤ Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ø´ØªØ±ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯\nğŸ“± Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨\n\nØ£Ø±Ø³Ù„ 1 Ù„Ø¨Ø¯Ø¡ Ø±Ø­Ù„Ø© Ø´Ø±Ø§Ø¡ Ø¹Ù‚Ø§Ø±Ùƒ Ø§Ù„Ø£ÙˆÙ„",
                    noResponse: "ğŸ  Ù„Ø§ Ù…Ø´ÙƒÙ„Ø©! Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ\n\nØ¥Ø°Ø§ ÙƒÙ†Øª Ù…Ù‡ØªÙ…Ø§Ù‹ Ø¨Ø´Ø±Ø§Ø¡ Ø¹Ù‚Ø§Ø± ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ØŒ\nÙŠÙ…ÙƒÙ†Ù†Ø§ Ø¥Ø±Ø³Ø§Ù„ Ù†ØµØ§Ø¦Ø­ Ù…ÙÙŠØ¯Ø© Ù„Ùƒ:\n\nğŸ  Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ† Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©\nğŸ’° Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ\nğŸ“ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª\nğŸ¯ Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ© Ù„Ù„Ù…Ø´ØªØ±ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯\n\nØ£Ø±Ø³Ù„ 1 Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©\nØ£Ø±Ø³Ù„ 2 Ù„Ù„Ø±ÙØ¶",
                    askDetails: "ğŸ  Ù…Ù…ØªØ§Ø²! Ø¯Ø¹Ù†Ø§ Ù†ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ:\n\nğŸ  Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:\n- Ø´Ù‚Ø© (1-3 ØºØ±Ù)\n- ÙÙŠÙ„Ø§ (3-5 ØºØ±Ù)\n- Ø§Ø³ØªÙˆØ¯ÙŠÙˆ\n- ØªØ§ÙˆÙ† Ù‡Ø§ÙˆØ³\n\nğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ÙØ¶Ù„:\n- Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„\n- Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ù…Ø¯Ø§Ø±Ø³\n- Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ø®Ø¯Ù…Ø§Øª\n\nğŸ’° Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©:\n- Ø£Ù‚Ù„ Ù…Ù† 500,000 Ø¯Ø±Ù‡Ù…\n- 500,000 - 1,000,000 Ø¯Ø±Ù‡Ù…\n- Ø£ÙƒØ«Ø± Ù…Ù† 1,000,000 Ø¯Ø±Ù‡Ù…\n\nğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©:\n- Ø¹Ø¯Ø¯ Ø§Ù„ØºØ±Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©\n- Ù…ÙˆÙ‚Ù Ø³ÙŠØ§Ø±Ø§Øª\n- Ø­Ø¯ÙŠÙ‚Ø© Ø£Ùˆ Ø´Ø±ÙØ©",
                    updatesConfirmed: "ğŸ  Ù…Ù…ØªØ§Ø²! ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ ÙÙŠ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¯Ø¹Ù… Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯ ğŸ¯\n\nØ³ØªØµÙ„Ùƒ:\nğŸ  Ù†ØµØ§Ø¦Ø­ Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª\nğŸ’° Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ\nğŸ“ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª\nğŸ¯ Ø¹Ø±ÙˆØ¶ Ø®Ø§ØµØ© Ù„Ù„Ù…Ø´ØªØ±ÙŠÙ† Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©\n\nğŸ“± Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨",
                    updatesDeclined: "ğŸ  Ù„Ø§ Ù…Ø´ÙƒÙ„Ø©! Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ ğŸ™\n\nØ¥Ø°Ø§ ØºÙŠØ±Øª Ø±Ø£ÙŠÙƒ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ØŒ\nÙ†Ø­Ù† Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø´Ø±Ø§Ø¡ Ø£ÙˆÙ„ Ø¹Ù‚Ø§Ø± Ù„Ùƒ ğŸ ",
                    thank: "ğŸ  Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ ÙÙŠ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¯Ø¹Ù… Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯ ğŸ‰\n\nØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù„ØªÙ‚Ø¯ÙŠÙ…:\nğŸ¤ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ©\nğŸ  Ø¹Ø±ÙˆØ¶ Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ\nğŸ“ Ù†ØµØ§Ø¦Ø­ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨\n\nğŸ¯ Ø±Ø­Ù„Ø© Ø´Ø±Ø§Ø¡ Ø¹Ù‚Ø§Ø±Ùƒ Ø§Ù„Ø£ÙˆÙ„ ØªØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù†!"
                },
                en: {
                    fireMessage: "Hello [NAME] ğŸ‘‹\nWe specialize in commercial real estate in Abu Dhabi.\nDo you have a commercial property you are thinking of selling or renting?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll offers and properties will only be sent via WhatsApp and with your consent\n\nÙ…Ø±Ø­Ø¨Ø§Ù‹ [NAME] ğŸ‘‹\nÙ†Ø­Ù† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© ÙÙŠ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ.\nÙ‡Ù„ Ù„Ø¯ÙŠÙƒ Ø¹Ù‚Ø§Ø± ØªØ¬Ø§Ø±ÙŠ ØªÙÙƒØ± ÙÙŠ Ø¨ÙŠØ¹Ù‡ Ø£Ùˆ ØªØ£Ø¬ÙŠØ±Ù‡ØŸ\n\nÙ„Ù„Ù†Ø¹Ù… Ø£Ø±Ø³Ù„ 1ØŒ Ù„Ù„Ù„Ø§ Ø£Ø±Ø³Ù„ 2\n\nÙ…Ù„Ø§Ø­Ø¸Ø©: Ø±Ù‚Ù…Ùƒ Ù…Ø­ÙÙˆØ¸ ÙˆÙ„Ù† ÙŠÙØ´Ø§Ø±Ùƒ Ù…Ø¹ Ø£ÙŠ Ø·Ø±Ù.\nÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø³ØªØµÙ„Ùƒ ÙÙ‚Ø· Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¨Ù…ÙˆØ§ÙÙ‚ØªÙƒ",
                    chooseLang: "Welcome ğŸŒŸ\nPlease choose language:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§\n\nØ£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸŒŸ\nØ±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§",
                    yesResponse: "Thank you for your reply ğŸ™\nTo help you better, please share a few details about your commercial property\n(property type, location, area, expected price).\n\nRest assured, we will not call you by phone.\nAll communication will remain through WhatsApp, at a time convenient for you.\n\nSend 1 to send property details",
                    noResponse: "Thank you for clarifying ğŸŒ¿\nIf you'd like, we can share with you from time to time the latest offers\nand commercial properties through WhatsApp only.\n\nNo calls, no interruptions â€” you decide if and when to continue.\n\nSend 1 to receive updates\nSend 2 to decline",
                    askDetails: "Excellent! Please send commercial property details:\n- Property type (office, shop, warehouse, etc.)\n- Location\n- Area\n- Expected price\n- Any additional details",
                    updatesConfirmed: "Thank you! You've been added to our updates list ğŸ“‹\nYou'll receive new offers and commercial properties via WhatsApp only",
                    updatesDeclined: "No problem, thank you! ğŸ™\nIf you change your mind in the future, you can contact us",
                    thank: "Thank you ğŸŒ¹\nYour information has been registered and we will contact you soon"
                }
            },
            rental: {
                ar: {
                    fireMessage: "Ù…Ø±Ø­Ø¨Ø§Ù‹ [NAME] ğŸ‘‹\nÙ†Ø­Ù† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ ØªØ£Ø¬ÙŠØ± Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙÙŠ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ.\nÙ‡Ù„ ØªØ¨Ø­Ø« Ø¹Ù† Ø¹Ù‚Ø§Ø± Ù„Ù„Ø¥ÙŠØ¬Ø§Ø± Ø£Ùˆ Ù„Ø¯ÙŠÙƒ Ø¹Ù‚Ø§Ø± Ù„Ù„ØªØ£Ø¬ÙŠØ±ØŸ\n\nÙ„Ù„Ù†Ø¹Ù… Ø£Ø±Ø³Ù„ 1ØŒ Ù„Ù„Ù„Ø§ Ø£Ø±Ø³Ù„ 2\n\nÙ…Ù„Ø§Ø­Ø¸Ø©: Ø±Ù‚Ù…Ùƒ Ù…Ø­ÙÙˆØ¸ ÙˆÙ„Ù† ÙŠÙØ´Ø§Ø±Ùƒ Ù…Ø¹ Ø£ÙŠ Ø·Ø±Ù.\nÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø³ØªØµÙ„Ùƒ ÙÙ‚Ø· Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¨Ù…ÙˆØ§ÙÙ‚ØªÙƒ\n\nHello [NAME] ğŸ‘‹\nWe specialize in property rentals in Abu Dhabi.\nAre you looking for a property to rent or do you have a property to rent out?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll offers and properties will only be sent via WhatsApp and with your consent",
                    chooseLang: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸŒŸ\nØ±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§\n\nWelcome ğŸŒŸ\nPlease choose language:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§",
                    yesResponse: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ø±Ø¯Ùƒ ğŸ™\nØ­ØªÙ‰ Ù†Ø³Ø§Ø¹Ø¯Ùƒ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ØŒ Ù…Ù…ÙƒÙ† ØªØ´Ø§Ø±ÙƒÙ†Ø§ ØªÙØ§ØµÙŠÙ„ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ\n(Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±ØŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ÙØ¶Ù„ØŒ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ù…Ø¯Ø©).\n\nØ§Ø·Ù…Ø¦Ù†ØŒ Ù„Ù† ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ùƒ Ù‡Ø§ØªÙÙŠØ§Ù‹ØŒ\nÙˆØ³ÙŠÙƒÙˆÙ† Ø§Ù„ØªÙˆØ§ØµÙ„ Ø­ØµØ±Ø§Ù‹ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¨Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø§Ø³Ø¨Ùƒ.\n\nØ£Ø±Ø³Ù„ 1 Ù„Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª",
                    noResponse: "Ù…Ù…ØªØ§Ø²ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙˆØ¶ÙŠØ­Ùƒ ğŸŒ¿\nØ¥Ø°Ø§ Ø£Ø­Ø¨Ø¨ØªØŒ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø£Ù† Ù†Ø±Ø³Ù„ Ù„Ùƒ Ù…Ù† ÙˆÙ‚Øª Ù„Ø¢Ø®Ø± Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\nÙˆØ§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„Ø¥ÙŠØ¬Ø§Ø± Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙÙ‚Ø·.\n\nÙ„Ù† ÙŠØªÙ… Ø£ÙŠ ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± Ù…ÙƒØ§Ù„Ù…Ø§ØªØŒ\nÙˆØ§Ù„Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¨ÙŠØ¯Ùƒ Ø¥Ù† Ø±ØºØ¨Øª Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø£Ùˆ Ø§Ù„ØªÙˆÙ‚Ù.\n\nØ£Ø±Ø³Ù„ 1 Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª\nØ£Ø±Ø³Ù„ 2 Ù„Ù„Ø±ÙØ¶",
                    askDetails: "Ù…Ù…ØªØ§Ø²! ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ:\n- Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (Ø´Ù‚Ø©ØŒ ÙÙŠÙ„Ø§ØŒ Ù…ÙƒØªØ¨ØŒ Ø¥Ù„Ø®)\n- Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ÙØ¶Ù„\n- Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©\n- Ù…Ø¯Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±\n- Ø£ÙŠ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©",
                    updatesConfirmed: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ğŸ“‹\nØ³ØªØµÙ„Ùƒ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„Ø¥ÙŠØ¬Ø§Ø± Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙÙ‚Ø·",
                    updatesDeclined: "Ù„Ø§ Ù…Ø´ÙƒÙ„Ø©ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ğŸ™\nØ¥Ø°Ø§ ØºÙŠØ±Øª Ø±Ø£ÙŠÙƒ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§",
                    thank: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ ğŸŒ¹\nØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙˆØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹"
                },
                en: {
                    fireMessage: "Hello [NAME] ğŸ‘‹\nWe specialize in property rentals in Abu Dhabi.\nAre you looking for a property to rent or do you have a property to rent out?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll offers and properties will only be sent via WhatsApp and with your consent\n\nÙ…Ø±Ø­Ø¨Ø§Ù‹ [NAME] ğŸ‘‹\nÙ†Ø­Ù† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ ØªØ£Ø¬ÙŠØ± Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙÙŠ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ.\nÙ‡Ù„ ØªØ¨Ø­Ø« Ø¹Ù† Ø¹Ù‚Ø§Ø± Ù„Ù„Ø¥ÙŠØ¬Ø§Ø± Ø£Ùˆ Ù„Ø¯ÙŠÙƒ Ø¹Ù‚Ø§Ø± Ù„Ù„ØªØ£Ø¬ÙŠØ±ØŸ\n\nÙ„Ù„Ù†Ø¹Ù… Ø£Ø±Ø³Ù„ 1ØŒ Ù„Ù„Ù„Ø§ Ø£Ø±Ø³Ù„ 2\n\nÙ…Ù„Ø§Ø­Ø¸Ø©: Ø±Ù‚Ù…Ùƒ Ù…Ø­ÙÙˆØ¸ ÙˆÙ„Ù† ÙŠÙØ´Ø§Ø±Ùƒ Ù…Ø¹ Ø£ÙŠ Ø·Ø±Ù.\nÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø³ØªØµÙ„Ùƒ ÙÙ‚Ø· Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¨Ù…ÙˆØ§ÙÙ‚ØªÙƒ",
                    chooseLang: "Welcome ğŸŒŸ\nPlease choose language:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§\n\nØ£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸŒŸ\nØ±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§",
                    yesResponse: "Thank you for your reply ğŸ™\nTo help you better, please share a few details about your needs\n(property type, preferred location, budget, duration).\n\nRest assured, we will not call you by phone.\nAll communication will remain through WhatsApp, at a time convenient for you.\n\nSend 1 to send requirements details",
                    noResponse: "Thank you for clarifying ğŸŒ¿\nIf you'd like, we can share with you from time to time the latest offers\nand available rental properties through WhatsApp only.\n\nNo calls, no interruptions â€” you decide if and when to continue.\n\nSend 1 to receive updates\nSend 2 to decline",
                    askDetails: "Excellent! Please send your requirements:\n- Property type needed (apartment, villa, office, etc.)\n- Preferred location\n- Monthly budget\n- Rental duration\n- Any additional requirements",
                    updatesConfirmed: "Thank you! You've been added to our updates list ğŸ“‹\nYou'll receive new offers and available rental properties via WhatsApp only",
                    updatesDeclined: "No problem, thank you! ğŸ™\nIf you change your mind in the future, you can contact us",
                    thank: "Thank you ğŸŒ¹\nYour information has been registered and we will contact you soon"
                }
            },
            investment: {
                ar: {
                    fireMessage: "Ù…Ø±Ø­Ø¨Ø§Ù‹ [NAME] ğŸ‘‹\nÙ†Ø­Ù† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ ÙÙŠ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ.\nÙ‡Ù„ ØªÙÙƒØ± ÙÙŠ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø£Ùˆ Ù„Ø¯ÙŠÙƒ Ø¹Ù‚Ø§Ø± Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ØŸ\n\nÙ„Ù„Ù†Ø¹Ù… Ø£Ø±Ø³Ù„ 1ØŒ Ù„Ù„Ù„Ø§ Ø£Ø±Ø³Ù„ 2\n\nÙ…Ù„Ø§Ø­Ø¸Ø©: Ø±Ù‚Ù…Ùƒ Ù…Ø­ÙÙˆØ¸ ÙˆÙ„Ù† ÙŠÙØ´Ø§Ø±Ùƒ Ù…Ø¹ Ø£ÙŠ Ø·Ø±Ù.\nÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„ÙØ±Øµ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø³ØªØµÙ„Ùƒ ÙÙ‚Ø· Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¨Ù…ÙˆØ§ÙÙ‚ØªÙƒ\n\nHello [NAME] ğŸ‘‹\nWe specialize in real estate investment in Abu Dhabi.\nAre you thinking of investing in real estate or do you have a property for investment?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll investment opportunities will only be sent via WhatsApp and with your consent",
                    chooseLang: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸŒŸ\nØ±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§\n\nWelcome ğŸŒŸ\nPlease choose language:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§",
                    yesResponse: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ø±Ø¯Ùƒ ğŸ™\nØ­ØªÙ‰ Ù†Ø³Ø§Ø¹Ø¯Ùƒ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ØŒ Ù…Ù…ÙƒÙ† ØªØ´Ø§Ø±ÙƒÙ†Ø§ ØªÙØ§ØµÙŠÙ„ Ø§Ø³ØªØ«Ù…Ø§Ø±Ùƒ\n(Ù†ÙˆØ¹ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ØŒ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ù…Ø¯Ø©ØŒ Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©).\n\nØ§Ø·Ù…Ø¦Ù†ØŒ Ù„Ù† ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ùƒ Ù‡Ø§ØªÙÙŠØ§Ù‹ØŒ\nÙˆØ³ÙŠÙƒÙˆÙ† Ø§Ù„ØªÙˆØ§ØµÙ„ Ø­ØµØ±Ø§Ù‹ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¨Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø§Ø³Ø¨Ùƒ.\n\nØ£Ø±Ø³Ù„ 1 Ù„Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±",
                    noResponse: "Ù…Ù…ØªØ§Ø²ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙˆØ¶ÙŠØ­Ùƒ ğŸŒ¿\nØ¥Ø°Ø§ Ø£Ø­Ø¨Ø¨ØªØŒ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø£Ù† Ù†Ø±Ø³Ù„ Ù„Ùƒ Ù…Ù† ÙˆÙ‚Øª Ù„Ø¢Ø®Ø± Ø§Ù„ÙØ±Øµ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©\nÙˆØ§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙÙ‚Ø·.\n\nÙ„Ù† ÙŠØªÙ… Ø£ÙŠ ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± Ù…ÙƒØ§Ù„Ù…Ø§ØªØŒ\nÙˆØ§Ù„Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¨ÙŠØ¯Ùƒ Ø¥Ù† Ø±ØºØ¨Øª Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø£Ùˆ Ø§Ù„ØªÙˆÙ‚Ù.\n\nØ£Ø±Ø³Ù„ 1 Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª\nØ£Ø±Ø³Ù„ 2 Ù„Ù„Ø±ÙØ¶",
                    askDetails: "Ù…Ù…ØªØ§Ø²! ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±:\n- Ù†ÙˆØ¹ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (Ø¹Ù‚Ø§Ø± Ø³ÙƒÙ†ÙŠØŒ ØªØ¬Ø§Ø±ÙŠØŒ Ø£Ø±Ø¶ØŒ Ø¥Ù„Ø®)\n- Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©\n- Ù…Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±\n- Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„\n- Ø£ÙŠ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©",
                    updatesConfirmed: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ğŸ“‹\nØ³ØªØµÙ„Ùƒ Ø§Ù„ÙØ±Øµ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© ÙˆØ§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙÙ‚Ø·",
                    updatesDeclined: "Ù„Ø§ Ù…Ø´ÙƒÙ„Ø©ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ğŸ™\nØ¥Ø°Ø§ ØºÙŠØ±Øª Ø±Ø£ÙŠÙƒ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§",
                    thank: "Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ ğŸŒ¹\nØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ ÙˆØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹"
                },
                en: {
                    fireMessage: "Hello [NAME] ğŸ‘‹\nWe specialize in real estate investment in Abu Dhabi.\nAre you thinking of investing in real estate or do you have a property for investment?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll investment opportunities will only be sent via WhatsApp and with your consent\n\nÙ…Ø±Ø­Ø¨Ø§Ù‹ [NAME] ğŸ‘‹\nÙ†Ø­Ù† Ù…ØªØ®ØµØµÙˆÙ† ÙÙŠ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ ÙÙŠ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ.\nÙ‡Ù„ ØªÙÙƒØ± ÙÙŠ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø£Ùˆ Ù„Ø¯ÙŠÙƒ Ø¹Ù‚Ø§Ø± Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ØŸ\n\nÙ„Ù„Ù†Ø¹Ù… Ø£Ø±Ø³Ù„ 1ØŒ Ù„Ù„Ù„Ø§ Ø£Ø±Ø³Ù„ 2\n\nÙ…Ù„Ø§Ø­Ø¸Ø©: Ø±Ù‚Ù…Ùƒ Ù…Ø­ÙÙˆØ¸ ÙˆÙ„Ù† ÙŠÙØ´Ø§Ø±Ùƒ Ù…Ø¹ Ø£ÙŠ Ø·Ø±Ù.\nÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„ÙØ±Øµ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø³ØªØµÙ„Ùƒ ÙÙ‚Ø· Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¨Ù…ÙˆØ§ÙÙ‚ØªÙƒ",
                    chooseLang: "Welcome ğŸŒŸ\nPlease choose language:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§\n\nØ£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ğŸŒŸ\nØ±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©:\n1 - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡¸ğŸ‡¦\n2 - English ğŸ‡¬ğŸ‡§",
                    yesResponse: "Thank you for your reply ğŸ™\nTo help you better, please share a few details about your investment\n(investment type, budget, duration, risk tolerance).\n\nRest assured, we will not call you by phone.\nAll communication will remain through WhatsApp, at a time convenient for you.\n\nSend 1 to send investment details",
                    noResponse: "Thank you for clarifying ğŸŒ¿\nIf you'd like, we can share with you from time to time investment opportunities\nand suitable properties for investment through WhatsApp only.\n\nNo calls, no interruptions â€” you decide if and when to continue.\n\nSend 1 to receive updates\nSend 2 to decline",
                    askDetails: "Excellent! Please send investment details:\n- Investment type needed (residential, commercial, land, etc.)\n- Available budget\n- Investment duration\n- Acceptable risk level\n- Any additional requirements",
                    updatesConfirmed: "Thank you! You've been added to our updates list ğŸ“‹\nYou'll receive investment opportunities and suitable properties via WhatsApp only",
                    updatesDeclined: "No problem, thank you! ğŸ™\nIf you change your mind in the future, you can contact us",
                    thank: "Thank you ğŸŒ¹\nYour information has been registered and we will contact you soon"
                }
            }
        };
        
        // All templates storage
        let templates = JSON.parse(JSON.stringify(businessTemplates));
        
        async function loadTemplate() {
            currentTemplate = document.getElementById('templateSelect').value;
            
            // Try to load from database first
            try {
                const response = await fetch(`/api/templates/${currentTemplate}`);
                const result = await response.json();
                
                if (result.success) {
                    // Load template from database
                    templates[currentTemplate] = result.template.data;
                    loadAllMessages();
                    showStatus(`âœ… Loaded template: ${currentTemplate} from database`, 'success');
                } else {
                    // Fallback to local template
                    loadAllMessages();
                    showStatus(`âš ï¸ Template not found in database, using local: ${currentTemplate}`, 'warning');
                }
            } catch (error) {
                // Fallback to local template
                loadAllMessages();
                showStatus(`âš ï¸ Error loading from database, using local: ${currentTemplate}`, 'warning');
            }
        }
        
        function createNewTemplate() {
            const templateName = document.getElementById('newTemplateName').value.trim();
            if (!templateName) {
                showStatus('Please enter a template name', 'error');
                return;
            }
            
            if (templates[templateName]) {
                showStatus('Template already exists', 'error');
                return;
            }
            
            // Create new template based on realestate template
            templates[templateName] = JSON.parse(JSON.stringify(businessTemplates.realestate));
            
            // Add to select dropdown
            const select = document.getElementById('templateSelect');
            const option = document.createElement('option');
            option.value = templateName;
            option.textContent = templateName;
            select.appendChild(option);
            
            // Select the new template
            select.value = templateName;
            currentTemplate = templateName;
            
            // Clear input
            document.getElementById('newTemplateName').value = '';
            
            // Load the new template
            loadAllMessages();
            
            showStatus(`Created new template: ${templateName}`, 'success');
        }
        
        function duplicateTemplate() {
            const templateName = document.getElementById('newTemplateName').value.trim();
            if (!templateName) {
                showStatus('Please enter a template name', 'error');
                return;
            }
            
            if (templates[templateName]) {
                showStatus('Template already exists', 'error');
                return;
            }
            
            // Duplicate current template
            templates[templateName] = JSON.parse(JSON.stringify(templates[currentTemplate]));
            
            // Add to select dropdown
            const select = document.getElementById('templateSelect');
            const option = document.createElement('option');
            option.value = templateName;
            option.textContent = templateName;
            select.appendChild(option);
            
            // Select the new template
            select.value = templateName;
            currentTemplate = templateName;
            
            // Clear input
            document.getElementById('newTemplateName').value = '';
            
            // Load the duplicated template
            loadAllMessages();
            
            showStatus(`Duplicated template: ${templateName}`, 'success');
        }
        
        function deleteTemplate() {
            if (['luxury', 'firsttime', 'expat', 'investor'].includes(currentTemplate)) {
                showStatus('Cannot delete built-in templates', 'error');
                return;
            }
            
            if (confirm(`Are you sure you want to delete template: ${currentTemplate}?`)) {
                // Remove from templates
                delete templates[currentTemplate];
                
                // Remove from select dropdown
                const select = document.getElementById('templateSelect');
                const option = select.querySelector(`option[value="${currentTemplate}"]`);
                if (option) {
                    option.remove();
                }
                
                // Switch to luxury template
                select.value = 'luxury';
                currentTemplate = 'luxury';
                
                // Load default template
                loadAllMessages();
                
                showStatus(`Deleted template: ${currentTemplate}`, 'success');
            }
        }

        async function setAsDefault() {
            const templateName = document.getElementById('templateSelect').value;
            
            try {
                const response = await fetch('/api/templates/set-active', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        templateName: templateName
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus(`âœ… Template "${templateName}" set as default (active)`, 'success');
                    // Refresh the template list to show which is active
                    loadAllTemplatesFromDatabase();
                    
                    // Reload the active template in the bot
                    try {
                        const reloadResponse = await fetch('/api/templates/reload', {
                            method: 'POST'
                        });
                        const reloadResult = await reloadResponse.json();
                        if (reloadResult.success) {
                            showStatus(`âœ… Template "${templateName}" set as default and reloaded in bot`, 'success');
                        } else {
                            showStatus(`âš ï¸ Template set as default but failed to reload in bot: ${reloadResult.error}`, 'warning');
                        }
                    } catch (reloadError) {
                        showStatus(`âš ï¸ Template set as default but failed to reload in bot: ${reloadError.message}`, 'warning');
                    }
                } else {
                    showStatus(`âŒ Failed to set as default: ${result.error}`, 'error');
                }
            } catch (error) {
                showStatus(`âŒ Error setting as default: ${error.message}`, 'error');
            }
        }
        
        function loadAllMessages() {
            currentLanguage = document.getElementById('language').value;
            
            // Load all messages for the selected language and template
            const messageTypes = ['fireMessage', 'chooseLang', 'yesResponse', 'noResponse', 'askDetails', 'updatesConfirmed', 'updatesDeclined', 'thank'];
            
            messageTypes.forEach(type => {
                if (templates[currentTemplate] && templates[currentTemplate][currentLanguage] && templates[currentTemplate][currentLanguage][type]) {
                    document.getElementById(type).value = templates[currentTemplate][currentLanguage][type];
                }
            });
        }
        
        function validateTemplate() {
            const fireMessage = document.getElementById('fireMessage').value;
            const yesResponse = document.getElementById('yesResponse').value;
            const noResponse = document.getElementById('noResponse').value;
            
            let errors = [];
            let warnings = [];
            
            // Check for [NAME] placeholder in fire message
            if (fireMessage && !fireMessage.includes('[NAME]')) {
                errors.push('Fire message must include [NAME] placeholder');
            }
            
            // Check for "1" and "2" instructions in responses
            if (yesResponse && !yesResponse.includes('1')) {
                warnings.push('Yes response should mention "1" for user response');
            }
            
            if (noResponse && !noResponse.includes('2')) {
                warnings.push('No response should mention "2" for user response');
            }
            
            // Check for bilingual content
            const hasArabic = fireMessage.includes('Ø£') || fireMessage.includes('Ø¨') || fireMessage.includes('Øª');
            const hasEnglish = /[a-zA-Z]/.test(fireMessage);
            
            if (fireMessage && (!hasArabic || !hasEnglish)) {
                warnings.push('Fire message should be bilingual (Arabic and English)');
            }
            
            // Show results
            if (errors.length === 0 && warnings.length === 0) {
                showStatus('âœ… Template validation passed! All required elements are present.', 'success');
            } else if (errors.length > 0) {
                showStatus('âŒ Validation Errors: ' + errors.join(', '), 'error');
            } else {
                showStatus('âš ï¸ Validation Warnings: ' + warnings.join(', '), 'warning');
            }
            
            return errors;
        }
        
        async function saveAllMessages() {
            currentLanguage = document.getElementById('language').value;
            
            // Validate template before saving
            const validationErrors = validateTemplate();
            if (validationErrors.length > 0) {
                showStatus('Validation Errors: ' + validationErrors.join(', '), 'error');
                return;
            }
            
            // Save all messages for the selected language and template
            const messageTypes = ['fireMessage', 'chooseLang', 'yesResponse', 'noResponse', 'askDetails', 'updatesConfirmed', 'updatesDeclined', 'thank'];
            let savedCount = 0;
            
            // Ensure template exists
            if (!templates[currentTemplate]) {
                templates[currentTemplate] = JSON.parse(JSON.stringify(businessTemplates.luxury));
            }
            
            // Ensure language exists in template
            if (!templates[currentTemplate][currentLanguage]) {
                templates[currentTemplate][currentLanguage] = {};
            }
            
            messageTypes.forEach(type => {
                const messageText = document.getElementById(type).value.trim();
                if (messageText) {
                    templates[currentTemplate][currentLanguage][type] = messageText;
                    savedCount++;
                }
            });
            
            // Save to database
            try {
                const response = await fetch('/api/templates/save', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        templateName: currentTemplate,
                        templateData: templates[currentTemplate]
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus(`âœ… Saved ${savedCount} messages for ${currentLanguage.toUpperCase()} in template: ${currentTemplate} to database`, 'success');
                } else {
                    showStatus(`âŒ Failed to save to database: ${result.error}`, 'error');
                }
            } catch (error) {
                showStatus(`âŒ Error saving to database: ${error.message}`, 'error');
            }
        }
        
        function resetAllMessages() {
            if (confirm('Are you sure you want to reset ALL messages to default? This will overwrite all your changes.')) {
                currentLanguage = document.getElementById('language').value;
                
                // Reset to original template messages
                const messageTypes = ['fireMessage', 'chooseLang', 'yesResponse', 'noResponse', 'askDetails', 'updatesConfirmed', 'updatesDeclined', 'thank'];
                
                messageTypes.forEach(type => {
                    if (businessTemplates[currentTemplate] && businessTemplates[currentTemplate][currentLanguage] && businessTemplates[currentTemplate][currentLanguage][type]) {
                        document.getElementById(type).value = businessTemplates[currentTemplate][currentLanguage][type];
                        templates[currentTemplate][currentLanguage][type] = businessTemplates[currentTemplate][currentLanguage][type];
                    }
                });
                
                showStatus(`Reset all messages to default for ${currentLanguage.toUpperCase()} in ${currentTemplate} template`, 'success');
            }
        }
        
        function previewCompleteFlow() {
            currentLanguage = document.getElementById('language').value;
            
            let flowPreview = `ğŸ”„ COMPLETE CONVERSATION FLOW (${currentLanguage.toUpperCase()})\n\n`;
            flowPreview += `ğŸ”¥ Step 1: Fire Message (Bulk Message)\n`;
            flowPreview += `"${document.getElementById('fireMessage').value || 'No message set'}"\n\n`;
            flowPreview += `ğŸ“± Step 2: User responds with 1 or 2\n\n`;
            flowPreview += `ğŸŒ Step 3: Language Selection\n`;
            flowPreview += `"${document.getElementById('chooseLang').value || 'No message set'}"\n\n`;
            
            flowPreview += `ğŸ“‹ Step 4: Response Processing\n\n`;
            flowPreview += `âœ… If user sent 1 (Yes):\n`;
            flowPreview += `"${document.getElementById('yesResponse').value || 'No message set'}"\n\n`;
            
            flowPreview += `ğŸ“ Step 5a: Details Request\n`;
            flowPreview += `"${document.getElementById('askDetails').value || 'No message set'}"\n\n`;
            
            flowPreview += `âŒ If user sent 2 (No):\n`;
            flowPreview += `"${document.getElementById('noResponse').value || 'No message set'}"\n\n`;
            
            flowPreview += `ğŸ“‹ Step 5b: Updates Choice\n`;
            flowPreview += `If user wants updates:\n`;
            flowPreview += `"${document.getElementById('updatesConfirmed').value || 'No message set'}"\n\n`;
            flowPreview += `If user doesn't want updates:\n`;
            flowPreview += `"${document.getElementById('updatesDeclined').value || 'No message set'}"\n\n`;
            
            flowPreview += `ğŸ™ Final Step: Thank You\n`;
            flowPreview += `"${document.getElementById('thank').value || 'No message set'}"\n\n`;
            
            flowPreview += `âœ… Flow Complete - User data collected and stored!`;
            
            document.getElementById('flowPreview').textContent = flowPreview;
        }
        
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
            status.style.display = 'block';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 5000);
        }
        
        // Initialize
        async function loadAllTemplatesFromDatabase() {
            try {
                const response = await fetch('/api/templates');
                const result = await response.json();
                
                if (result.success) {
                    // Update templates with database data
                    result.templates.forEach(template => {
                        templates[template.name] = template.data;
                    });
                    
                    // Get active template
                    const activeResponse = await fetch('/api/templates/active');
                    const activeResult = await activeResponse.json();
                    const activeTemplateName = activeResult.success ? activeResult.template.name : null;
                    
                    // Update template dropdown
                    const select = document.getElementById('templateSelect');
                    select.innerHTML = ''; // Clear existing options
                    
                    // Add built-in templates
                    const builtInTemplates = [
                        { value: 'luxury', text: 'ğŸ° Luxury Properties' },
                        { value: 'firsttime', text: 'ğŸ  First-Time Buyers' },
                        { value: 'expat', text: 'ğŸŒ Expat Relocation' },
                        { value: 'investor', text: 'ğŸ’ Smart Investors' }
                    ];
                    
                    builtInTemplates.forEach(template => {
                        const option = document.createElement('option');
                        option.value = template.value;
                        option.textContent = template.value === activeTemplateName ? 
                            `â­ ${template.text} (ACTIVE)` : template.text;
                        select.appendChild(option);
                    });
                    
                    // Add database templates
                    result.templates.forEach(template => {
                        if (!builtInTemplates.find(t => t.value === template.name)) {
                            const option = document.createElement('option');
                            option.value = template.name;
                            option.textContent = template.name === activeTemplateName ? 
                                `â­ ğŸ“ ${template.name} (ACTIVE)` : `ğŸ“ ${template.name}`;
                            select.appendChild(option);
                        }
                    });
                    
                    showStatus(`âœ… Loaded ${result.templates.length} templates from database${activeTemplateName ? ` (Active: ${activeTemplateName})` : ''}`, 'success');
                } else {
                    showStatus(`âš ï¸ Could not load templates from database: ${result.error}`, 'warning');
                }
            } catch (error) {
                showStatus(`âš ï¸ Error loading templates from database: ${error.message}`, 'warning');
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Set default language
            document.getElementById('language').value = 'ar';
            currentLanguage = 'ar';
            
            // Load templates from database first, then load messages
            loadAllTemplatesFromDatabase().then(() => {
                loadAllMessages();
            });
        });
    </script>
</body>
</html>
