<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message Editor - Bot Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: #667eea;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .nav {
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        .nav a {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            margin-right: 20px;
        }
        .nav a:hover {
            color: #5a6fd8;
        }
        .content {
            padding: 30px;
        }
        .editor-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }
        .editor-section h3 {
            margin-top: 0;
            color: #495057;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #495057;
        }
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .form-group textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            font-family: Arial, sans-serif;
            resize: vertical;
        }
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .btn-warning {
            background: #ffc107;
            color: black;
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        .preview-section {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        .preview-section h4 {
            margin-top: 0;
            color: #1976d2;
        }
        .preview-message {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            font-family: Arial, sans-serif;
            white-space: pre-wrap;
            min-height: 100px;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        .message-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .message-type {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .message-type:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        .message-type.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        .message-type h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }
        .message-type p {
            margin: 0;
            font-size: 12px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìù Yes/No Conversation Templates</h1>
            <p>Create and manage different conversation flow templates for any business</p>
        </div>
        
        <div class="nav">
            <a href="/">üè† Dashboard</a>
            <a href="/spreadsheet">üìä Spreadsheet</a>
            <a href="/message-editor">üìù Message Editor</a>
            <a href="/template-manager">‚öôÔ∏è Template Manager</a>
        </div>
        
        <div class="content">
            <div id="status" class="status"></div>
            
            <!-- Template Management -->
            <div class="editor-section">
                <h3>üìã Template Management</h3>
                <div style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="form-group" style="flex: 1; min-width: 200px;">
                        <label for="templateSelect">Select Template:</label>
                        <select id="templateSelect" onchange="loadTemplate()">
                            <option value="luxury">üè∞ Luxury Properties</option>
                            <option value="firsttime">üè† First-Time Buyers</option>
                            <option value="expat">üåç Expat Relocation</option>
                            <option value="investor">üíé Smart Investors</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 1; min-width: 200px;">
                        <label for="newTemplateName">Create New Template:</label>
                        <input type="text" id="newTemplateName" placeholder="Template name..." style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                    </div>
                    <div style="display: flex; gap: 10px; align-items: end;">
                        <button class="btn btn-success" onclick="createNewTemplate()">‚ûï Create</button>
                        <button class="btn btn-primary" onclick="setAsDefault()">‚≠ê Set as Default</button>
                        <button class="btn btn-warning" onclick="duplicateTemplate()">üìã Duplicate</button>
                        <button class="btn btn-danger" onclick="deleteTemplate()">üóëÔ∏è Delete</button>
                    </div>
                </div>
            </div>
            
            <!-- Instructions -->
            <div class="editor-section" style="background: #f8f9fa; border-left: 4px solid #007bff;">
                <h3>üìã Important Instructions</h3>
                <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <h4 style="color: #dc3545; margin-top: 0;">‚ö†Ô∏è Required Elements:</h4>
                    <ul style="color: #333; line-height: 1.8;">
                        <li><strong>[NAME]</strong> - Must include this placeholder in fire messages to personalize with contact name</li>
                        <li><strong>1 for Yes</strong> - Users must respond with "1" for yes/positive responses</li>
                        <li><strong>2 for No</strong> - Users must respond with "2" for no/negative responses</li>
                        <li><strong>Arabic & English</strong> - All messages must be bilingual (Arabic then English)</li>
                    </ul>
                    
                    <h4 style="color: #28a745; margin-top: 20px;">‚úÖ Template Structure:</h4>
                    <ol style="color: #333; line-height: 1.8;">
                        <li><strong>Fire Message:</strong> Initial bulk message with [NAME] placeholder</li>
                        <li><strong>Language Selection:</strong> Ask user to choose Arabic or English</li>
                        <li><strong>Yes Response:</strong> Message when user sends "1"</li>
                        <li><strong>No Response:</strong> Message when user sends "2"</li>
                        <li><strong>Details Request:</strong> Ask for specific information</li>
                        <li><strong>Updates Confirmed:</strong> When user wants updates</li>
                        <li><strong>Updates Declined:</strong> When user doesn't want updates</li>
                        <li><strong>Thank You:</strong> Final confirmation message</li>
                    </ol>
                </div>
            </div>
            
            <!-- Language Selection -->
            <div class="editor-section">
                <h3>üåç Language Selection</h3>
                <div class="form-group">
                    <label for="language">Select Language to Edit:</label>
                    <select id="language" onchange="loadAllMessages()">
                        <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
            
            <!-- Complete Flow Editor -->
            <div class="editor-section">
                <h3>‚úèÔ∏è Edit Complete Flow</h3>
                
                <!-- Fire Message -->
                <div class="form-group">
                    <label for="fireMessage">üî• Fire Message (Bulk Message):</label>
                    <textarea id="fireMessage" placeholder="Initial bulk message sent to all contacts..."></textarea>
                </div>
                
                <!-- Fire Message Response -->
                <div class="form-group">
                    <label for="chooseLang">üåç Language Selection Message:</label>
                    <textarea id="chooseLang" placeholder="Message when user responds to fire message..."></textarea>
                </div>
                
                <!-- Yes Response -->
                <div class="form-group">
                    <label for="yesResponse">‚úÖ Yes Response (User says Yes):</label>
                    <textarea id="yesResponse" placeholder="Message when user says Yes..."></textarea>
                </div>
                
                <!-- No Response -->
                <div class="form-group">
                    <label for="noResponse">‚ùå No Response (User says No):</label>
                    <textarea id="noResponse" placeholder="Message when user says No..."></textarea>
                </div>
                
                <!-- Details Request -->
                <div class="form-group">
                    <label for="askDetails">üìù Details Request:</label>
                    <textarea id="askDetails" placeholder="Message asking for details..."></textarea>
                </div>
                
                <!-- Updates Confirmed -->
                <div class="form-group">
                    <label for="updatesConfirmed">üìã Updates Confirmed:</label>
                    <textarea id="updatesConfirmed" placeholder="Message when user wants updates..."></textarea>
                </div>
                
                <!-- Updates Declined -->
                <div class="form-group">
                    <label for="updatesDeclined">üö´ Updates Declined:</label>
                    <textarea id="updatesDeclined" placeholder="Message when user doesn't want updates..."></textarea>
                </div>
                
                <!-- Thank You -->
                <div class="form-group">
                    <label for="thank">üôè Thank You Message:</label>
                    <textarea id="thank" placeholder="Final thank you message..."></textarea>
                </div>
                
                       <!-- Action Buttons -->
                       <div class="form-group">
                           <button class="btn btn-info" onclick="validateTemplate()">üîç Validate Template</button>
                           <button class="btn btn-success" onclick="saveAllMessages()">üíæ Save Complete Flow</button>
                           <button class="btn btn-warning" onclick="resetAllMessages()">üîÑ Reset All to Default</button>
                           <button class="btn btn-primary" onclick="previewCompleteFlow()">üëÅÔ∏è Preview Complete Flow</button>
                       </div>
            </div>
            
            <!-- Flow Preview -->
            <div class="preview-section">
                <h4>üëÅÔ∏è Complete Flow Preview</h4>
                <div id="flowPreview" class="preview-message">
                    Select a language and click "Preview Complete Flow" to see the entire conversation flow...
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'ar';
        let currentTemplate = 'luxury';
        
        // Business templates
        const businessTemplates = {
            luxury: {
                ar: {
                    fireMessage: "üè∞ ŸÖÿ±ÿ≠ÿ®ÿßŸã [NAME] üëã\nŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÅÿßÿÆÿ±ÿ© ŸÅŸä ÿ£ÿ®Ÿàÿ∏ÿ®Ÿä.\nŸáŸÑ ÿ™ŸÖŸÑŸÉ ÿπŸÇÿßÿ±ÿßŸã ŸÅÿßÿÆÿ±ÿßŸã ÿ£Ÿà ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÇÿßÿ± ÿ±ÿßŸÇŸäÿü\n\nŸÑŸÑŸÜÿπŸÖ ÿ£ÿ±ÿ≥ŸÑ 1ÿå ŸÑŸÑŸÑÿß ÿ£ÿ±ÿ≥ŸÑ 2\n\n‚ú® ŸÜÿ≠ŸÜ ŸÜÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ© ŸÅŸÇÿ∑\nüè∞ Luxury Properties Specialist\n\nüè∞ Hello [NAME] üëã\nWe specialize in luxury properties in Abu Dhabi.\nDo you own a luxury property or are you looking for an exclusive property?\n\nFor yes send 1, for no send 2\n\n‚ú® We deal with premium properties only\nüè∞ Luxury Properties Specialist",
                    chooseLang: "ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ üåü\nÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß\n\nWelcome üåü\nPlease choose language:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß",
                    yesResponse: "üè∞ ŸÖŸÖÿ™ÿßÿ≤! ÿ¥ŸÉÿ±ÿßŸã ŸÑÿßÿÆÿ™Ÿäÿßÿ±ŸÉ ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÅÿßÿÆÿ±ÿ© üôè\n\nŸÑŸÜŸÇÿØŸÖ ŸÑŸÉ ÿ£ŸÅÿ∂ŸÑ ÿÆÿØŸÖÿ©ÿå ŸÜŸàÿØ ŸÖÿπÿ±ŸÅÿ© ÿ™ŸÅÿßÿµŸäŸÑ ÿπŸÇÿßÿ±ŸÉ ÿßŸÑŸÅÿßÿÆÿ±:\n‚ú® ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑŸÖŸÖŸäÿ≤\nüè∞ ŸÜŸàÿπ ÿßŸÑÿπŸÇÿßÿ± (ŸÅŸäŸÑÿß ÿ±ÿßŸÇŸäÿ©ÿå ÿ®ŸÜÿ™ŸáÿßŸàÿ≥ÿå ŸÇÿµÿ±ÿå ÿ•ŸÑÿÆ)\nüí∞ ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ™ŸàŸÇÿπÿ©\n\nüîí ÿÆÿµŸàÿµŸäÿ© ÿ™ÿßŸÖÿ© - ŸÑŸÜ Ÿäÿ™ŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÉ Ÿáÿßÿ™ŸÅŸäÿßŸã\nüíé ÿÆÿØŸÖÿ© VIP ÿ≠ÿµÿ±Ÿäÿ© ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ®\n\nÿ£ÿ±ÿ≥ŸÑ 1 ŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÅÿßÿµŸäŸÑ ÿπŸÇÿßÿ±ŸÉ ÿßŸÑŸÅÿßÿÆÿ±",
                    noResponse: "üåü ŸÑÿß ŸÖÿ¥ŸÉŸÑÿ©! ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™Ÿàÿ∂Ÿäÿ≠ŸÉ\n\nÿ•ÿ∞ÿß ŸÉŸÜÿ™ ŸÖŸáÿ™ŸÖÿßŸã ÿ®ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÅÿßÿÆÿ±ÿ© ŸÅŸä ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑÿå\nŸäŸÖŸÉŸÜŸÜÿß ÿ•ÿ±ÿ≥ÿßŸÑ ÿ£ÿ≠ÿØÿ´ ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ© ŸÑŸÉ:\n\nüè∞ ŸÅŸäŸÑÿßÿ™ ÿ±ÿßŸÇŸäÿ©\nüèôÔ∏è ÿ®ŸÜÿ™ŸáÿßŸàÿ≥ ÿ≠ÿµÿ±Ÿäÿ©\nüèñÔ∏è ÿπŸÇÿßÿ±ÿßÿ™ ÿ≥ÿßÿ≠ŸÑŸäÿ©\n\nüîî ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ VIP ÿ≠ÿµÿ±Ÿäÿ© ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® ŸÅŸÇÿ∑\n\nÿ£ÿ±ÿ≥ŸÑ 1 ŸÑŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÅÿßÿÆÿ±ÿ©\nÿ£ÿ±ÿ≥ŸÑ 2 ŸÑŸÑÿ±ŸÅÿ∂",
                    askDetails: "üè∞ ÿ±ÿßÿ¶ÿπ! Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÅÿßÿµŸäŸÑ ÿπŸÇÿßÿ±ŸÉ ÿßŸÑŸÅÿßÿÆÿ±:\n\n‚ú® ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑŸÖŸÖŸäÿ≤ (ŸÖÿ´ŸÑ: ÿ¨ÿ≤Ÿäÿ±ÿ© ÿßŸÑÿ±ŸäŸÖÿå ŸÖÿßÿ±ŸäŸÜÿßÿå ŸÉŸàÿ±ŸÜŸäÿ¥)\nüè∞ ŸÜŸàÿπ ÿßŸÑÿπŸÇÿßÿ± (ŸÅŸäŸÑÿß ÿ±ÿßŸÇŸäÿ©ÿå ÿ®ŸÜÿ™ŸáÿßŸàÿ≥ÿå ŸÇÿµÿ±ÿå ÿ•ŸÑÿÆ)\nüìê ÿßŸÑŸÖÿ≥ÿßÿ≠ÿ© (ŸÖÿ™ÿ± ŸÖÿ±ÿ®ÿπ)\nüí∞ ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ™ŸàŸÇÿπÿ©\nüåü ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿÆÿßÿµÿ© (ŸÖÿ≥ÿ®ÿ≠ÿå ÿ≠ÿØŸäŸÇÿ©ÿå ÿ•ÿ∑ŸÑÿßŸÑÿ©ÿå ÿ•ŸÑÿÆ)\n\nüíé ÿ≥ŸÜŸÇŸàŸÖ ÿ®ÿ™ŸÇŸäŸäŸÖ ÿπŸÇÿßÿ±ŸÉ Ÿàÿ™ŸÇÿØŸäŸÖ ÿ£ŸÅÿ∂ŸÑ ÿπÿ±ÿ∂",
                    updatesConfirmed: "üè∞ ŸÖŸÖÿ™ÿßÿ≤! ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑŸÉ ŸÅŸä ŸÇÿßÿ¶ŸÖÿ© VIP ŸÑŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÅÿßÿÆÿ±ÿ© ‚ú®\n\nÿ≥ÿ™ÿµŸÑŸÉ:\nüè∞ ÿ£ÿ≠ÿØÿ´ ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©\nüíé ÿπÿ±Ÿàÿ∂ ÿ≠ÿµÿ±Ÿäÿ©\nüåü ŸÅÿ±ÿµ ÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±Ÿäÿ© ÿ±ÿßŸÇŸäÿ©\n\nüîî ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ VIP ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® ŸÅŸÇÿ∑",
                    updatesDeclined: "üåü ŸÑÿß ŸÖÿ¥ŸÉŸÑÿ©! ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ üôè\n\nÿ•ÿ∞ÿß ÿ∫Ÿäÿ±ÿ™ ÿ±ÿ£ŸäŸÉ ŸÅŸä ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑÿå\nŸÜÿ≠ŸÜ ŸáŸÜÿß ŸÑÿÆÿØŸÖÿ™ŸÉ ŸÅŸä ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÅÿßÿÆÿ±ÿ© üè∞",
                    thank: "üè∞ ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ŸÖÿπŸÑŸàŸÖÿßÿ™ŸÉ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ VIP ‚ú®\n\nÿ≥Ÿäÿ™ŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã ŸÑÿ™ŸÇŸäŸäŸÖ ÿπŸÇÿßÿ±ŸÉ ÿßŸÑŸÅÿßÿÆÿ±\nüíé ÿÆÿØŸÖÿ© VIP ÿ≠ÿµÿ±Ÿäÿ©"
            },
            en: {
                fireMessage: "üè∞ Hello [NAME] üëã\nWe specialize in luxury properties in Abu Dhabi.\nDo you own a luxury property or are you looking for an exclusive property?\n\nFor yes send 1, for no send 2\n\n‚ú® We deal with premium properties only\nüè∞ Luxury Properties Specialist\n\nüè∞ ŸÖÿ±ÿ≠ÿ®ÿßŸã [NAME] üëã\nŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÅÿßÿÆÿ±ÿ© ŸÅŸä ÿ£ÿ®Ÿàÿ∏ÿ®Ÿä.\nŸáŸÑ ÿ™ŸÖŸÑŸÉ ÿπŸÇÿßÿ±ÿßŸã ŸÅÿßÿÆÿ±ÿßŸã ÿ£Ÿà ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÇÿßÿ± ÿ±ÿßŸÇŸäÿü\n\nŸÑŸÑŸÜÿπŸÖ ÿ£ÿ±ÿ≥ŸÑ 1ÿå ŸÑŸÑŸÑÿß ÿ£ÿ±ÿ≥ŸÑ 2\n\n‚ú® ŸÜÿ≠ŸÜ ŸÜÿ™ÿπÿßŸÖŸÑ ŸÖÿπ ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ© ŸÅŸÇÿ∑\nüè∞ Luxury Properties Specialist",
                chooseLang: "Welcome üåü\nPlease choose language:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß\n\nÿ£ŸáŸÑÿßŸã ÿ®ŸÉ üåü\nÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß",
                yesResponse: "üè∞ Excellent! Thank you for choosing luxury properties üôè\n\nTo provide you with the best service, we'd like to know about your luxury property:\n‚ú® Exclusive location\nüè∞ Property type (luxury villa, penthouse, mansion, etc.)\nüí∞ Expected value\n\nüîí Complete privacy - no phone calls\nüíé VIP service exclusively via WhatsApp\n\nSend 1 to share your luxury property details",
                noResponse: "üåü No problem! Thank you for clarifying\n\nIf you're interested in luxury properties in the future,\nwe can send you the latest exclusive properties:\n\nüè∞ Luxury villas\nüèôÔ∏è Exclusive penthouses\nüèñÔ∏è Waterfront properties\n\nüîî VIP notifications exclusively via WhatsApp\n\nSend 1 to agree to luxury notifications\nSend 2 to decline",
                askDetails: "üè∞ Wonderful! Please share your luxury property details:\n\n‚ú® Exclusive location (e.g., Al Reem Island, Marina, Corniche)\nüè∞ Property type (luxury villa, penthouse, mansion, etc.)\nüìê Area (square meters)\nüí∞ Expected value\nüåü Special features (pool, garden, view, etc.)\n\nüíé We'll evaluate your property and provide the best offer",
                updatesConfirmed: "üè∞ Excellent! You've been added to our VIP luxury properties list ‚ú®\n\nYou'll receive:\nüè∞ Latest exclusive properties\nüíé Special offers\nüåü Premium investment opportunities\n\nüîî VIP notifications via WhatsApp only",
                updatesDeclined: "üåü No problem! Thank you üôè\n\nIf you change your mind in the future,\nwe're here to serve you in luxury properties üè∞",
                thank: "üè∞ Thank you! Your information has been registered in our VIP database ‚ú®\n\nWe'll contact you soon to evaluate your luxury property\nüíé Exclusive VIP service"
                }
            },
            firsttime: {
                ar: {
                    fireMessage: "üè† ŸÖÿ±ÿ≠ÿ®ÿßŸã [NAME] üëã\nŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ŸÖÿ≥ÿßÿπÿØÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±ŸäŸÜ ŸÑÿ£ŸàŸÑ ŸÖÿ±ÿ© ŸÅŸä ÿ£ÿ®Ÿàÿ∏ÿ®Ÿä!\nŸáŸÑ ÿ™ŸÅŸÉÿ± ŸÅŸä ÿ¥ÿ±ÿßÿ° ÿ£ŸàŸÑ ÿπŸÇÿßÿ± ŸÑŸÉÿü\n\nŸÑŸÑŸÜÿπŸÖ ÿ£ÿ±ÿ≥ŸÑ 1ÿå ŸÑŸÑŸÑÿß ÿ£ÿ±ÿ≥ŸÑ 2\n\nüéØ ŸÜŸÇÿØŸÖ ÿØÿπŸÖ ŸÉÿßŸÖŸÑ ŸÑŸÑŸÖÿ¥ÿ™ÿ±ŸäŸÜ ÿßŸÑÿ¨ÿØÿØ\nüè† First-Time Buyer Specialists\n\nüè† Hello [NAME] üëã\nWe specialize in helping first-time buyers in Abu Dhabi!\nAre you thinking of buying your first property?\n\nFor yes send 1, for no send 2\n\nüéØ We provide complete support for new buyers\nüè† First-Time Buyer Specialists",
                    chooseLang: "ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ üåü\nÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß\n\nWelcome üåü\nPlease choose language:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß",
                    yesResponse: "üè† ÿ±ÿßÿ¶ÿπ! ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ÿ±ÿ≠ŸÑÿ© ÿ¥ÿ±ÿßÿ° ÿ£ŸàŸÑ ÿπŸÇÿßÿ± ŸÑŸÉ! üéâ\n\nŸÜÿ≠ŸÜ ŸáŸÜÿß ŸÑŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ŸÅŸä ŸÉŸÑ ÿÆÿ∑Ÿàÿ©:\nüè† ŸÜŸàÿπ ÿßŸÑÿπŸÇÿßÿ± ÿßŸÑŸÖÿ∑ŸÑŸàÿ® (ÿ¥ŸÇÿ©ÿå ŸÅŸäŸÑÿßÿå ÿßÿ≥ÿ™ŸàÿØŸäŸà)\nüìç ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑŸÖŸÅÿ∂ŸÑ\nüí∞ ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ© ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©\nüë®‚Äçüë©‚Äçüëß‚Äçüë¶ ÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™ ÿßŸÑÿπÿßÿ¶ŸÑÿ©\n\nü§ù ÿØÿπŸÖ ŸÉÿßŸÖŸÑ ŸÑŸÑŸÖÿ¥ÿ™ÿ±ŸäŸÜ ÿßŸÑÿ¨ÿØÿØ\nüì± ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ© ŸÖÿ¨ÿßŸÜŸäÿ© ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ®\n\nÿ£ÿ±ÿ≥ŸÑ 1 ŸÑÿ®ÿØÿ° ÿ±ÿ≠ŸÑÿ© ÿ¥ÿ±ÿßÿ° ÿπŸÇÿßÿ±ŸÉ ÿßŸÑÿ£ŸàŸÑ",
                    noResponse: "üè† ŸÑÿß ŸÖÿ¥ŸÉŸÑÿ©! ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ\n\nÿ•ÿ∞ÿß ŸÉŸÜÿ™ ŸÖŸáÿ™ŸÖÿßŸã ÿ®ÿ¥ÿ±ÿßÿ° ÿπŸÇÿßÿ± ŸÅŸä ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑÿå\nŸäŸÖŸÉŸÜŸÜÿß ÿ•ÿ±ÿ≥ÿßŸÑ ŸÜÿµÿßÿ¶ÿ≠ ŸÖŸÅŸäÿØÿ© ŸÑŸÉ:\n\nüè† ÿØŸÑŸäŸÑ ÿßŸÑŸÖÿ¥ÿ™ÿ±ŸäŸÜ ŸÑÿ£ŸàŸÑ ŸÖÿ±ÿ©\nüí∞ ŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑÿ™ŸÖŸàŸäŸÑ ÿßŸÑÿπŸÇÿßÿ±Ÿä\nüìç ÿ£ŸÅÿ∂ŸÑ ÿßŸÑŸÖŸÜÿßÿ∑ŸÇ ŸÑŸÑÿπÿßÿ¶ŸÑÿßÿ™\nüéØ ÿπÿ±Ÿàÿ∂ ÿÆÿßÿµÿ© ŸÑŸÑŸÖÿ¥ÿ™ÿ±ŸäŸÜ ÿßŸÑÿ¨ÿØÿØ\n\nÿ£ÿ±ÿ≥ŸÑ 1 ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸÜÿµÿßÿ¶ÿ≠ ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©\nÿ£ÿ±ÿ≥ŸÑ 2 ŸÑŸÑÿ±ŸÅÿ∂",
                    askDetails: "üè† ŸÖŸÖÿ™ÿßÿ≤! ÿØÿπŸÜÿß ŸÜÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™ŸÉ:\n\nüè† ŸÜŸàÿπ ÿßŸÑÿπŸÇÿßÿ± ÿßŸÑŸÖÿ∑ŸÑŸàÿ®:\n- ÿ¥ŸÇÿ© (1-3 ÿ∫ÿ±ŸÅ)\n- ŸÅŸäŸÑÿß (3-5 ÿ∫ÿ±ŸÅ)\n- ÿßÿ≥ÿ™ŸàÿØŸäŸà\n- ÿ™ÿßŸàŸÜ ŸáÿßŸàÿ≥\n\nüìç ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑŸÖŸÅÿ∂ŸÑ:\n- ŸÇÿ±Ÿäÿ® ŸÖŸÜ ÿßŸÑÿπŸÖŸÑ\n- ŸÇÿ±Ÿäÿ® ŸÖŸÜ ÿßŸÑŸÖÿØÿßÿ±ÿ≥\n- ŸÇÿ±Ÿäÿ® ŸÖŸÜ ÿßŸÑÿÆÿØŸÖÿßÿ™\n\nüí∞ ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ© ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©:\n- ÿ£ŸÇŸÑ ŸÖŸÜ 500,000 ÿØÿ±ŸáŸÖ\n- 500,000 - 1,000,000 ÿØÿ±ŸáŸÖ\n- ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 1,000,000 ÿØÿ±ŸáŸÖ\n\nüë®‚Äçüë©‚Äçüëß‚Äçüë¶ ÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™ ÿßŸÑÿπÿßÿ¶ŸÑÿ©:\n- ÿπÿØÿØ ÿßŸÑÿ∫ÿ±ŸÅ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©\n- ŸÖŸàŸÇŸÅ ÿ≥Ÿäÿßÿ±ÿßÿ™\n- ÿ≠ÿØŸäŸÇÿ© ÿ£Ÿà ÿ¥ÿ±ŸÅÿ©",
                    updatesConfirmed: "üè† ŸÖŸÖÿ™ÿßÿ≤! ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑŸÉ ŸÅŸä ÿ®ÿ±ŸÜÿßŸÖÿ¨ ÿØÿπŸÖ ÿßŸÑŸÖÿ¥ÿ™ÿ±ŸäŸÜ ÿßŸÑÿ¨ÿØÿØ üéØ\n\nÿ≥ÿ™ÿµŸÑŸÉ:\nüè† ŸÜÿµÿßÿ¶ÿ≠ ÿ¥ÿ±ÿßÿ° ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™\nüí∞ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™ŸÖŸàŸäŸÑ ÿßŸÑÿπŸÇÿßÿ±Ÿä\nüìç ÿ£ŸÅÿ∂ŸÑ ÿßŸÑŸÖŸÜÿßÿ∑ŸÇ ŸÑŸÑÿπÿßÿ¶ŸÑÿßÿ™\nüéØ ÿπÿ±Ÿàÿ∂ ÿÆÿßÿµÿ© ŸÑŸÑŸÖÿ¥ÿ™ÿ±ŸäŸÜ ŸÑÿ£ŸàŸÑ ŸÖÿ±ÿ©\n\nüì± ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ© ŸÖÿ¨ÿßŸÜŸäÿ© ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ®",
                    updatesDeclined: "üè† ŸÑÿß ŸÖÿ¥ŸÉŸÑÿ©! ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ üôè\n\nÿ•ÿ∞ÿß ÿ∫Ÿäÿ±ÿ™ ÿ±ÿ£ŸäŸÉ ŸÅŸä ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑÿå\nŸÜÿ≠ŸÜ ŸáŸÜÿß ŸÑŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ŸÅŸä ÿ¥ÿ±ÿßÿ° ÿ£ŸàŸÑ ÿπŸÇÿßÿ± ŸÑŸÉ üè†",
                    thank: "üè† ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑŸÉ ŸÅŸä ÿ®ÿ±ŸÜÿßŸÖÿ¨ ÿØÿπŸÖ ÿßŸÑŸÖÿ¥ÿ™ÿ±ŸäŸÜ ÿßŸÑÿ¨ÿØÿØ üéâ\n\nÿ≥Ÿäÿ™ŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã ŸÑÿ™ŸÇÿØŸäŸÖ:\nü§ù ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ© ŸÖÿ¨ÿßŸÜŸäÿ©\nüè† ÿπÿ±Ÿàÿ∂ ŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ™ŸÉ\nüìç ŸÜÿµÿßÿ¶ÿ≠ ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®\n\nüéØ ÿ±ÿ≠ŸÑÿ© ÿ¥ÿ±ÿßÿ° ÿπŸÇÿßÿ±ŸÉ ÿßŸÑÿ£ŸàŸÑ ÿ™ÿ®ÿØÿ£ ÿßŸÑÿ¢ŸÜ!"
                },
                en: {
                    fireMessage: "Hello [NAME] üëã\nWe specialize in commercial real estate in Abu Dhabi.\nDo you have a commercial property you are thinking of selling or renting?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll offers and properties will only be sent via WhatsApp and with your consent\n\nŸÖÿ±ÿ≠ÿ®ÿßŸã [NAME] üëã\nŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ© ŸÅŸä ÿ£ÿ®Ÿàÿ∏ÿ®Ÿä.\nŸáŸÑ ŸÑÿØŸäŸÉ ÿπŸÇÿßÿ± ÿ™ÿ¨ÿßÿ±Ÿä ÿ™ŸÅŸÉÿ± ŸÅŸä ÿ®ŸäÿπŸá ÿ£Ÿà ÿ™ÿ£ÿ¨Ÿäÿ±Ÿáÿü\n\nŸÑŸÑŸÜÿπŸÖ ÿ£ÿ±ÿ≥ŸÑ 1ÿå ŸÑŸÑŸÑÿß ÿ£ÿ±ÿ≥ŸÑ 2\n\nŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ±ŸÇŸÖŸÉ ŸÖÿ≠ŸÅŸàÿ∏ ŸàŸÑŸÜ ŸäŸèÿ¥ÿßÿ±ŸÉ ŸÖÿπ ÿ£Ÿä ÿ∑ÿ±ŸÅ.\nŸàÿ¨ŸÖŸäÿπ ÿßŸÑÿπÿ±Ÿàÿ∂ ŸàÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿ≥ÿ™ÿµŸÑŸÉ ŸÅŸÇÿ∑ ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® Ÿàÿ®ŸÖŸàÿßŸÅŸÇÿ™ŸÉ",
                    chooseLang: "Welcome üåü\nPlease choose language:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß\n\nÿ£ŸáŸÑÿßŸã ÿ®ŸÉ üåü\nÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß",
                    yesResponse: "Thank you for your reply üôè\nTo help you better, please share a few details about your commercial property\n(property type, location, area, expected price).\n\nRest assured, we will not call you by phone.\nAll communication will remain through WhatsApp, at a time convenient for you.\n\nSend 1 to send property details",
                    noResponse: "Thank you for clarifying üåø\nIf you'd like, we can share with you from time to time the latest offers\nand commercial properties through WhatsApp only.\n\nNo calls, no interruptions ‚Äî you decide if and when to continue.\n\nSend 1 to receive updates\nSend 2 to decline",
                    askDetails: "Excellent! Please send commercial property details:\n- Property type (office, shop, warehouse, etc.)\n- Location\n- Area\n- Expected price\n- Any additional details",
                    updatesConfirmed: "Thank you! You've been added to our updates list üìã\nYou'll receive new offers and commercial properties via WhatsApp only",
                    updatesDeclined: "No problem, thank you! üôè\nIf you change your mind in the future, you can contact us",
                    thank: "Thank you üåπ\nYour information has been registered and we will contact you soon"
                }
            },
            rental: {
                ar: {
                    fireMessage: "ŸÖÿ±ÿ≠ÿ®ÿßŸã [NAME] üëã\nŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ÿ™ÿ£ÿ¨Ÿäÿ± ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ŸÅŸä ÿ£ÿ®Ÿàÿ∏ÿ®Ÿä.\nŸáŸÑ ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÇÿßÿ± ŸÑŸÑÿ•Ÿäÿ¨ÿßÿ± ÿ£Ÿà ŸÑÿØŸäŸÉ ÿπŸÇÿßÿ± ŸÑŸÑÿ™ÿ£ÿ¨Ÿäÿ±ÿü\n\nŸÑŸÑŸÜÿπŸÖ ÿ£ÿ±ÿ≥ŸÑ 1ÿå ŸÑŸÑŸÑÿß ÿ£ÿ±ÿ≥ŸÑ 2\n\nŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ±ŸÇŸÖŸÉ ŸÖÿ≠ŸÅŸàÿ∏ ŸàŸÑŸÜ ŸäŸèÿ¥ÿßÿ±ŸÉ ŸÖÿπ ÿ£Ÿä ÿ∑ÿ±ŸÅ.\nŸàÿ¨ŸÖŸäÿπ ÿßŸÑÿπÿ±Ÿàÿ∂ ŸàÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿ≥ÿ™ÿµŸÑŸÉ ŸÅŸÇÿ∑ ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® Ÿàÿ®ŸÖŸàÿßŸÅŸÇÿ™ŸÉ\n\nHello [NAME] üëã\nWe specialize in property rentals in Abu Dhabi.\nAre you looking for a property to rent or do you have a property to rent out?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll offers and properties will only be sent via WhatsApp and with your consent",
                    chooseLang: "ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ üåü\nÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß\n\nWelcome üåü\nPlease choose language:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß",
                    yesResponse: "ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ±ÿØŸÉ üôè\nÿ≠ÿ™Ÿâ ŸÜÿ≥ÿßÿπÿØŸÉ ÿ®ÿ¥ŸÉŸÑ ÿ£ŸÅÿ∂ŸÑÿå ŸÖŸÖŸÉŸÜ ÿ™ÿ¥ÿßÿ±ŸÉŸÜÿß ÿ™ŸÅÿßÿµŸäŸÑ ÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™ŸÉ\n(ŸÜŸàÿπ ÿßŸÑÿπŸÇÿßÿ±ÿå ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑŸÖŸÅÿ∂ŸÑÿå ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©ÿå ÿßŸÑŸÖÿØÿ©).\n\nÿßÿ∑ŸÖÿ¶ŸÜÿå ŸÑŸÜ Ÿäÿ™ŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÉ Ÿáÿßÿ™ŸÅŸäÿßŸãÿå\nŸàÿ≥ŸäŸÉŸàŸÜ ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿ≠ÿµÿ±ÿßŸã ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® Ÿàÿ®ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ∞Ÿä ŸäŸÜÿßÿ≥ÿ®ŸÉ.\n\nÿ£ÿ±ÿ≥ŸÑ 1 ŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™",
                    noResponse: "ŸÖŸÖÿ™ÿßÿ≤ÿå ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™Ÿàÿ∂Ÿäÿ≠ŸÉ üåø\nÿ•ÿ∞ÿß ÿ£ÿ≠ÿ®ÿ®ÿ™ÿå ŸäŸÖŸÉŸÜŸÜÿß ÿ£ŸÜ ŸÜÿ±ÿ≥ŸÑ ŸÑŸÉ ŸÖŸÜ ŸàŸÇÿ™ ŸÑÿ¢ÿÆÿ± ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑÿ¨ÿØŸäÿØÿ©\nŸàÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ© ŸÑŸÑÿ•Ÿäÿ¨ÿßÿ± ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® ŸÅŸÇÿ∑.\n\nŸÑŸÜ Ÿäÿ™ŸÖ ÿ£Ÿä ÿ™ŸàÿßÿµŸÑ ÿπÿ®ÿ± ŸÖŸÉÿßŸÑŸÖÿßÿ™ÿå\nŸàÿßŸÑŸÇÿ±ÿßÿ± ÿØÿßÿ¶ŸÖÿßŸã ÿ®ŸäÿØŸÉ ÿ•ŸÜ ÿ±ÿ∫ÿ®ÿ™ ÿ®ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ© ÿ£Ÿà ÿßŸÑÿ™ŸàŸÇŸÅ.\n\nÿ£ÿ±ÿ≥ŸÑ 1 ŸÑŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™\nÿ£ÿ±ÿ≥ŸÑ 2 ŸÑŸÑÿ±ŸÅÿ∂",
                    askDetails: "ŸÖŸÖÿ™ÿßÿ≤! Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÅÿßÿµŸäŸÑ ÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™ŸÉ:\n- ŸÜŸàÿπ ÿßŸÑÿπŸÇÿßÿ± ÿßŸÑŸÖÿ∑ŸÑŸàÿ® (ÿ¥ŸÇÿ©ÿå ŸÅŸäŸÑÿßÿå ŸÖŸÉÿ™ÿ®ÿå ÿ•ŸÑÿÆ)\n- ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑŸÖŸÅÿ∂ŸÑ\n- ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ© ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©\n- ŸÖÿØÿ© ÿßŸÑÿ•Ÿäÿ¨ÿßÿ±\n- ÿ£Ÿä ŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©",
                    updatesConfirmed: "ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑŸÉ ŸÅŸä ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ üìã\nÿ≥ÿ™ÿµŸÑŸÉ ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑÿ¨ÿØŸäÿØÿ© ŸàÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ© ŸÑŸÑÿ•Ÿäÿ¨ÿßÿ± ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® ŸÅŸÇÿ∑",
                    updatesDeclined: "ŸÑÿß ŸÖÿ¥ŸÉŸÑÿ©ÿå ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! üôè\nÿ•ÿ∞ÿß ÿ∫Ÿäÿ±ÿ™ ÿ±ÿ£ŸäŸÉ ŸÅŸä ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑÿå ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß",
                    thank: "ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ üåπ\nÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ŸÖÿπŸÑŸàŸÖÿßÿ™ŸÉ Ÿàÿ≥Ÿäÿ™ŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã"
                },
                en: {
                    fireMessage: "Hello [NAME] üëã\nWe specialize in property rentals in Abu Dhabi.\nAre you looking for a property to rent or do you have a property to rent out?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll offers and properties will only be sent via WhatsApp and with your consent\n\nŸÖÿ±ÿ≠ÿ®ÿßŸã [NAME] üëã\nŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ÿ™ÿ£ÿ¨Ÿäÿ± ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ŸÅŸä ÿ£ÿ®Ÿàÿ∏ÿ®Ÿä.\nŸáŸÑ ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜ ÿπŸÇÿßÿ± ŸÑŸÑÿ•Ÿäÿ¨ÿßÿ± ÿ£Ÿà ŸÑÿØŸäŸÉ ÿπŸÇÿßÿ± ŸÑŸÑÿ™ÿ£ÿ¨Ÿäÿ±ÿü\n\nŸÑŸÑŸÜÿπŸÖ ÿ£ÿ±ÿ≥ŸÑ 1ÿå ŸÑŸÑŸÑÿß ÿ£ÿ±ÿ≥ŸÑ 2\n\nŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ±ŸÇŸÖŸÉ ŸÖÿ≠ŸÅŸàÿ∏ ŸàŸÑŸÜ ŸäŸèÿ¥ÿßÿ±ŸÉ ŸÖÿπ ÿ£Ÿä ÿ∑ÿ±ŸÅ.\nŸàÿ¨ŸÖŸäÿπ ÿßŸÑÿπÿ±Ÿàÿ∂ ŸàÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿ≥ÿ™ÿµŸÑŸÉ ŸÅŸÇÿ∑ ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® Ÿàÿ®ŸÖŸàÿßŸÅŸÇÿ™ŸÉ",
                    chooseLang: "Welcome üåü\nPlease choose language:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß\n\nÿ£ŸáŸÑÿßŸã ÿ®ŸÉ üåü\nÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß",
                    yesResponse: "Thank you for your reply üôè\nTo help you better, please share a few details about your needs\n(property type, preferred location, budget, duration).\n\nRest assured, we will not call you by phone.\nAll communication will remain through WhatsApp, at a time convenient for you.\n\nSend 1 to send requirements details",
                    noResponse: "Thank you for clarifying üåø\nIf you'd like, we can share with you from time to time the latest offers\nand available rental properties through WhatsApp only.\n\nNo calls, no interruptions ‚Äî you decide if and when to continue.\n\nSend 1 to receive updates\nSend 2 to decline",
                    askDetails: "Excellent! Please send your requirements:\n- Property type needed (apartment, villa, office, etc.)\n- Preferred location\n- Monthly budget\n- Rental duration\n- Any additional requirements",
                    updatesConfirmed: "Thank you! You've been added to our updates list üìã\nYou'll receive new offers and available rental properties via WhatsApp only",
                    updatesDeclined: "No problem, thank you! üôè\nIf you change your mind in the future, you can contact us",
                    thank: "Thank you üåπ\nYour information has been registered and we will contact you soon"
                }
            },
            investment: {
                ar: {
                    fireMessage: "ŸÖÿ±ÿ≠ÿ®ÿßŸã [NAME] üëã\nŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ÿßŸÑÿπŸÇÿßÿ±Ÿä ŸÅŸä ÿ£ÿ®Ÿàÿ∏ÿ®Ÿä.\nŸáŸÑ ÿ™ŸÅŸÉÿ± ŸÅŸä ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ŸÅŸä ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿ£Ÿà ŸÑÿØŸäŸÉ ÿπŸÇÿßÿ± ŸÑŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±ÿü\n\nŸÑŸÑŸÜÿπŸÖ ÿ£ÿ±ÿ≥ŸÑ 1ÿå ŸÑŸÑŸÑÿß ÿ£ÿ±ÿ≥ŸÑ 2\n\nŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ±ŸÇŸÖŸÉ ŸÖÿ≠ŸÅŸàÿ∏ ŸàŸÑŸÜ ŸäŸèÿ¥ÿßÿ±ŸÉ ŸÖÿπ ÿ£Ÿä ÿ∑ÿ±ŸÅ.\nŸàÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±ÿµ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±Ÿäÿ© ÿ≥ÿ™ÿµŸÑŸÉ ŸÅŸÇÿ∑ ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® Ÿàÿ®ŸÖŸàÿßŸÅŸÇÿ™ŸÉ\n\nHello [NAME] üëã\nWe specialize in real estate investment in Abu Dhabi.\nAre you thinking of investing in real estate or do you have a property for investment?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll investment opportunities will only be sent via WhatsApp and with your consent",
                    chooseLang: "ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ üåü\nÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß\n\nWelcome üåü\nPlease choose language:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß",
                    yesResponse: "ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ±ÿØŸÉ üôè\nÿ≠ÿ™Ÿâ ŸÜÿ≥ÿßÿπÿØŸÉ ÿ®ÿ¥ŸÉŸÑ ÿ£ŸÅÿ∂ŸÑÿå ŸÖŸÖŸÉŸÜ ÿ™ÿ¥ÿßÿ±ŸÉŸÜÿß ÿ™ŸÅÿßÿµŸäŸÑ ÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±ŸÉ\n(ŸÜŸàÿπ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±ÿå ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©ÿå ÿßŸÑŸÖÿØÿ©ÿå ÿßŸÑŸÖÿÆÿßÿ∑ÿ± ÿßŸÑŸÖŸÇÿ®ŸàŸÑÿ©).\n\nÿßÿ∑ŸÖÿ¶ŸÜÿå ŸÑŸÜ Ÿäÿ™ŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÉ Ÿáÿßÿ™ŸÅŸäÿßŸãÿå\nŸàÿ≥ŸäŸÉŸàŸÜ ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿ≠ÿµÿ±ÿßŸã ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® Ÿàÿ®ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ∞Ÿä ŸäŸÜÿßÿ≥ÿ®ŸÉ.\n\nÿ£ÿ±ÿ≥ŸÑ 1 ŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±",
                    noResponse: "ŸÖŸÖÿ™ÿßÿ≤ÿå ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ™Ÿàÿ∂Ÿäÿ≠ŸÉ üåø\nÿ•ÿ∞ÿß ÿ£ÿ≠ÿ®ÿ®ÿ™ÿå ŸäŸÖŸÉŸÜŸÜÿß ÿ£ŸÜ ŸÜÿ±ÿ≥ŸÑ ŸÑŸÉ ŸÖŸÜ ŸàŸÇÿ™ ŸÑÿ¢ÿÆÿ± ÿßŸÑŸÅÿ±ÿµ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±Ÿäÿ©\nŸàÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® ŸÅŸÇÿ∑.\n\nŸÑŸÜ Ÿäÿ™ŸÖ ÿ£Ÿä ÿ™ŸàÿßÿµŸÑ ÿπÿ®ÿ± ŸÖŸÉÿßŸÑŸÖÿßÿ™ÿå\nŸàÿßŸÑŸÇÿ±ÿßÿ± ÿØÿßÿ¶ŸÖÿßŸã ÿ®ŸäÿØŸÉ ÿ•ŸÜ ÿ±ÿ∫ÿ®ÿ™ ÿ®ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ© ÿ£Ÿà ÿßŸÑÿ™ŸàŸÇŸÅ.\n\nÿ£ÿ±ÿ≥ŸÑ 1 ŸÑŸÑŸÖŸàÿßŸÅŸÇÿ© ÿπŸÑŸâ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™\nÿ£ÿ±ÿ≥ŸÑ 2 ŸÑŸÑÿ±ŸÅÿ∂",
                    askDetails: "ŸÖŸÖÿ™ÿßÿ≤! Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±:\n- ŸÜŸàÿπ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ÿßŸÑŸÖÿ∑ŸÑŸàÿ® (ÿπŸÇÿßÿ± ÿ≥ŸÉŸÜŸäÿå ÿ™ÿ¨ÿßÿ±Ÿäÿå ÿ£ÿ±ÿ∂ÿå ÿ•ŸÑÿÆ)\n- ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ© ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©\n- ŸÖÿØÿ© ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±\n- ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑŸÖÿÆÿßÿ∑ÿ± ÿßŸÑŸÖŸÇÿ®ŸàŸÑ\n- ÿ£Ÿä ŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©",
                    updatesConfirmed: "ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑŸÉ ŸÅŸä ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ üìã\nÿ≥ÿ™ÿµŸÑŸÉ ÿßŸÑŸÅÿ±ÿµ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±Ÿäÿ© ŸàÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® ŸÅŸÇÿ∑",
                    updatesDeclined: "ŸÑÿß ŸÖÿ¥ŸÉŸÑÿ©ÿå ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ! üôè\nÿ•ÿ∞ÿß ÿ∫Ÿäÿ±ÿ™ ÿ±ÿ£ŸäŸÉ ŸÅŸä ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑÿå ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß",
                    thank: "ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ üåπ\nÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ŸÖÿπŸÑŸàŸÖÿßÿ™ŸÉ Ÿàÿ≥Ÿäÿ™ŸÖ ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã"
                },
                en: {
                    fireMessage: "Hello [NAME] üëã\nWe specialize in real estate investment in Abu Dhabi.\nAre you thinking of investing in real estate or do you have a property for investment?\n\nFor yes send 1, for no send 2\n\nNote: Your number will be kept safe and will not be shared with anyone.\nAll investment opportunities will only be sent via WhatsApp and with your consent\n\nŸÖÿ±ÿ≠ÿ®ÿßŸã [NAME] üëã\nŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ÿßŸÑÿπŸÇÿßÿ±Ÿä ŸÅŸä ÿ£ÿ®Ÿàÿ∏ÿ®Ÿä.\nŸáŸÑ ÿ™ŸÅŸÉÿ± ŸÅŸä ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ŸÅŸä ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ ÿ£Ÿà ŸÑÿØŸäŸÉ ÿπŸÇÿßÿ± ŸÑŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±ÿü\n\nŸÑŸÑŸÜÿπŸÖ ÿ£ÿ±ÿ≥ŸÑ 1ÿå ŸÑŸÑŸÑÿß ÿ£ÿ±ÿ≥ŸÑ 2\n\nŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ±ŸÇŸÖŸÉ ŸÖÿ≠ŸÅŸàÿ∏ ŸàŸÑŸÜ ŸäŸèÿ¥ÿßÿ±ŸÉ ŸÖÿπ ÿ£Ÿä ÿ∑ÿ±ŸÅ.\nŸàÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±ÿµ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±Ÿäÿ© ÿ≥ÿ™ÿµŸÑŸÉ ŸÅŸÇÿ∑ ÿπÿ®ÿ± ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® Ÿàÿ®ŸÖŸàÿßŸÅŸÇÿ™ŸÉ",
                    chooseLang: "Welcome üåü\nPlease choose language:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß\n\nÿ£ŸáŸÑÿßŸã ÿ®ŸÉ üåü\nÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©:\n1 - ÿßŸÑÿπÿ±ÿ®Ÿäÿ© üá∏üá¶\n2 - English üá¨üáß",
                    yesResponse: "Thank you for your reply üôè\nTo help you better, please share a few details about your investment\n(investment type, budget, duration, risk tolerance).\n\nRest assured, we will not call you by phone.\nAll communication will remain through WhatsApp, at a time convenient for you.\n\nSend 1 to send investment details",
                    noResponse: "Thank you for clarifying üåø\nIf you'd like, we can share with you from time to time investment opportunities\nand suitable properties for investment through WhatsApp only.\n\nNo calls, no interruptions ‚Äî you decide if and when to continue.\n\nSend 1 to receive updates\nSend 2 to decline",
                    askDetails: "Excellent! Please send investment details:\n- Investment type needed (residential, commercial, land, etc.)\n- Available budget\n- Investment duration\n- Acceptable risk level\n- Any additional requirements",
                    updatesConfirmed: "Thank you! You've been added to our updates list üìã\nYou'll receive investment opportunities and suitable properties via WhatsApp only",
                    updatesDeclined: "No problem, thank you! üôè\nIf you change your mind in the future, you can contact us",
                    thank: "Thank you üåπ\nYour information has been registered and we will contact you soon"
                }
            }
        };
        
        // All templates storage
        let templates = JSON.parse(JSON.stringify(businessTemplates));
        
        async function loadTemplate() {
            currentTemplate = document.getElementById('templateSelect').value;
            
            // Try to load from database first
            try {
                const response = await fetch(`/api/templates/${currentTemplate}`);
                const result = await response.json();
                
                if (result.success) {
                    // Load template from database
                    templates[currentTemplate] = result.template.data;
                    loadAllMessages();
                    showStatus(`‚úÖ Loaded template: ${currentTemplate} from database`, 'success');
                } else {
                    // Fallback to local template
                    loadAllMessages();
                    showStatus(`‚ö†Ô∏è Template not found in database, using local: ${currentTemplate}`, 'warning');
                }
            } catch (error) {
                // Fallback to local template
                loadAllMessages();
                showStatus(`‚ö†Ô∏è Error loading from database, using local: ${currentTemplate}`, 'warning');
            }
        }
        
        function createNewTemplate() {
            const templateName = document.getElementById('newTemplateName').value.trim();
            if (!templateName) {
                showStatus('Please enter a template name', 'error');
                return;
            }
            
            if (templates[templateName]) {
                showStatus('Template already exists', 'error');
                return;
            }
            
            // Create new template based on realestate template
            templates[templateName] = JSON.parse(JSON.stringify(businessTemplates.realestate));
            
            // Add to select dropdown
            const select = document.getElementById('templateSelect');
            const option = document.createElement('option');
            option.value = templateName;
            option.textContent = templateName;
            select.appendChild(option);
            
            // Select the new template
            select.value = templateName;
            currentTemplate = templateName;
            
            // Clear input
            document.getElementById('newTemplateName').value = '';
            
            // Load the new template
            loadAllMessages();
            
            showStatus(`Created new template: ${templateName}`, 'success');
        }
        
        function duplicateTemplate() {
            const templateName = document.getElementById('newTemplateName').value.trim();
            if (!templateName) {
                showStatus('Please enter a template name', 'error');
                return;
            }
            
            if (templates[templateName]) {
                showStatus('Template already exists', 'error');
                return;
            }
            
            // Duplicate current template
            templates[templateName] = JSON.parse(JSON.stringify(templates[currentTemplate]));
            
            // Add to select dropdown
            const select = document.getElementById('templateSelect');
            const option = document.createElement('option');
            option.value = templateName;
            option.textContent = templateName;
            select.appendChild(option);
            
            // Select the new template
            select.value = templateName;
            currentTemplate = templateName;
            
            // Clear input
            document.getElementById('newTemplateName').value = '';
            
            // Load the duplicated template
            loadAllMessages();
            
            showStatus(`Duplicated template: ${templateName}`, 'success');
        }
        
        function deleteTemplate() {
            if (['luxury', 'firsttime', 'expat', 'investor'].includes(currentTemplate)) {
                showStatus('Cannot delete built-in templates', 'error');
                return;
            }
            
            if (confirm(`Are you sure you want to delete template: ${currentTemplate}?`)) {
                // Remove from templates
                delete templates[currentTemplate];
                
                // Remove from select dropdown
                const select = document.getElementById('templateSelect');
                const option = select.querySelector(`option[value="${currentTemplate}"]`);
                if (option) {
                    option.remove();
                }
                
                // Switch to luxury template
                select.value = 'luxury';
                currentTemplate = 'luxury';
                
                // Load default template
                loadAllMessages();
                
                showStatus(`Deleted template: ${currentTemplate}`, 'success');
            }
        }

        async function setAsDefault() {
            const templateName = document.getElementById('templateSelect').value;
            
            try {
                const response = await fetch('/api/templates/set-active', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        templateName: templateName
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus(`‚úÖ Template "${templateName}" set as default (active)`, 'success');
                    // Refresh the template list to show which is active
                    loadAllTemplatesFromDatabase();
                    
                    // Reload the active template in the bot
                    try {
                        const reloadResponse = await fetch('/api/templates/reload', {
                            method: 'POST'
                        });
                        const reloadResult = await reloadResponse.json();
                        if (reloadResult.success) {
                            showStatus(`‚úÖ Template "${templateName}" set as default and reloaded in bot`, 'success');
                        } else {
                            showStatus(`‚ö†Ô∏è Template set as default but failed to reload in bot: ${reloadResult.error}`, 'warning');
                        }
                    } catch (reloadError) {
                        showStatus(`‚ö†Ô∏è Template set as default but failed to reload in bot: ${reloadError.message}`, 'warning');
                    }
                } else {
                    showStatus(`‚ùå Failed to set as default: ${result.error}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Error setting as default: ${error.message}`, 'error');
            }
        }
        
        function loadAllMessages() {
            currentLanguage = document.getElementById('language').value;
            
            // Load all messages for the selected language and template
            const messageTypes = ['fireMessage', 'chooseLang', 'yesResponse', 'noResponse', 'askDetails', 'updatesConfirmed', 'updatesDeclined', 'thank'];
            
            messageTypes.forEach(type => {
                if (templates[currentTemplate] && templates[currentTemplate][currentLanguage] && templates[currentTemplate][currentLanguage][type]) {
                    document.getElementById(type).value = templates[currentTemplate][currentLanguage][type];
                }
            });
        }
        
        function validateTemplate() {
            const fireMessage = document.getElementById('fireMessage').value;
            const yesResponse = document.getElementById('yesResponse').value;
            const noResponse = document.getElementById('noResponse').value;
            
            let errors = [];
            let warnings = [];
            
            // Check for [NAME] placeholder in fire message
            if (fireMessage && !fireMessage.includes('[NAME]')) {
                errors.push('Fire message must include [NAME] placeholder');
            }
            
            // Check for "1" and "2" instructions in responses
            if (yesResponse && !yesResponse.includes('1')) {
                warnings.push('Yes response should mention "1" for user response');
            }
            
            if (noResponse && !noResponse.includes('2')) {
                warnings.push('No response should mention "2" for user response');
            }
            
            // Check for bilingual content
            const hasArabic = fireMessage.includes('ÿ£') || fireMessage.includes('ÿ®') || fireMessage.includes('ÿ™');
            const hasEnglish = /[a-zA-Z]/.test(fireMessage);
            
            if (fireMessage && (!hasArabic || !hasEnglish)) {
                warnings.push('Fire message should be bilingual (Arabic and English)');
            }
            
            // Show results
            if (errors.length === 0 && warnings.length === 0) {
                showStatus('‚úÖ Template validation passed! All required elements are present.', 'success');
            } else if (errors.length > 0) {
                showStatus('‚ùå Validation Errors: ' + errors.join(', '), 'error');
            } else {
                showStatus('‚ö†Ô∏è Validation Warnings: ' + warnings.join(', '), 'warning');
            }
            
            return errors;
        }
        
        async function saveAllMessages() {
            currentLanguage = document.getElementById('language').value;
            
            // Validate template before saving
            const validationErrors = validateTemplate();
            if (validationErrors.length > 0) {
                showStatus('Validation Errors: ' + validationErrors.join(', '), 'error');
                return;
            }
            
            // Save all messages for the selected language and template
            const messageTypes = ['fireMessage', 'chooseLang', 'yesResponse', 'noResponse', 'askDetails', 'updatesConfirmed', 'updatesDeclined', 'thank'];
            let savedCount = 0;
            
            // Ensure template exists
            if (!templates[currentTemplate]) {
                templates[currentTemplate] = JSON.parse(JSON.stringify(businessTemplates.luxury));
            }
            
            // Ensure language exists in template
            if (!templates[currentTemplate][currentLanguage]) {
                templates[currentTemplate][currentLanguage] = {};
            }
            
            messageTypes.forEach(type => {
                const messageText = document.getElementById(type).value.trim();
                if (messageText) {
                    templates[currentTemplate][currentLanguage][type] = messageText;
                    savedCount++;
                }
            });
            
            // Save to database
            try {
                const response = await fetch('/api/templates/save', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        templateName: currentTemplate,
                        templateData: templates[currentTemplate]
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus(`‚úÖ Saved ${savedCount} messages for ${currentLanguage.toUpperCase()} in template: ${currentTemplate} to database`, 'success');
                } else {
                    showStatus(`‚ùå Failed to save to database: ${result.error}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Error saving to database: ${error.message}`, 'error');
            }
        }
        
        function resetAllMessages() {
            if (confirm('Are you sure you want to reset ALL messages to default? This will overwrite all your changes.')) {
                currentLanguage = document.getElementById('language').value;
                
                // Reset to original template messages
                const messageTypes = ['fireMessage', 'chooseLang', 'yesResponse', 'noResponse', 'askDetails', 'updatesConfirmed', 'updatesDeclined', 'thank'];
                
                messageTypes.forEach(type => {
                    if (businessTemplates[currentTemplate] && businessTemplates[currentTemplate][currentLanguage] && businessTemplates[currentTemplate][currentLanguage][type]) {
                        document.getElementById(type).value = businessTemplates[currentTemplate][currentLanguage][type];
                        templates[currentTemplate][currentLanguage][type] = businessTemplates[currentTemplate][currentLanguage][type];
                    }
                });
                
                showStatus(`Reset all messages to default for ${currentLanguage.toUpperCase()} in ${currentTemplate} template`, 'success');
            }
        }
        
        function previewCompleteFlow() {
            currentLanguage = document.getElementById('language').value;
            
            let flowPreview = `üîÑ COMPLETE CONVERSATION FLOW (${currentLanguage.toUpperCase()})\n\n`;
            flowPreview += `üî• Step 1: Fire Message (Bulk Message)\n`;
            flowPreview += `"${document.getElementById('fireMessage').value || 'No message set'}"\n\n`;
            flowPreview += `üì± Step 2: User responds with 1 or 2\n\n`;
            flowPreview += `üåç Step 3: Language Selection\n`;
            flowPreview += `"${document.getElementById('chooseLang').value || 'No message set'}"\n\n`;
            
            flowPreview += `üìã Step 4: Response Processing\n\n`;
            flowPreview += `‚úÖ If user sent 1 (Yes):\n`;
            flowPreview += `"${document.getElementById('yesResponse').value || 'No message set'}"\n\n`;
            
            flowPreview += `üìù Step 5a: Details Request\n`;
            flowPreview += `"${document.getElementById('askDetails').value || 'No message set'}"\n\n`;
            
            flowPreview += `‚ùå If user sent 2 (No):\n`;
            flowPreview += `"${document.getElementById('noResponse').value || 'No message set'}"\n\n`;
            
            flowPreview += `üìã Step 5b: Updates Choice\n`;
            flowPreview += `If user wants updates:\n`;
            flowPreview += `"${document.getElementById('updatesConfirmed').value || 'No message set'}"\n\n`;
            flowPreview += `If user doesn't want updates:\n`;
            flowPreview += `"${document.getElementById('updatesDeclined').value || 'No message set'}"\n\n`;
            
            flowPreview += `üôè Final Step: Thank You\n`;
            flowPreview += `"${document.getElementById('thank').value || 'No message set'}"\n\n`;
            
            flowPreview += `‚úÖ Flow Complete - User data collected and stored!`;
            
            document.getElementById('flowPreview').textContent = flowPreview;
        }
        
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
            status.style.display = 'block';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 5000);
        }
        
        // Initialize
        async function loadAllTemplatesFromDatabase() {
            try {
                const response = await fetch('/api/templates');
                const result = await response.json();
                
                if (result.success) {
                    // Update templates with database data
                    result.templates.forEach(template => {
                        templates[template.name] = template.data;
                    });
                    
                    // Get active template
                    const activeResponse = await fetch('/api/templates/active');
                    const activeResult = await activeResponse.json();
                    const activeTemplateName = activeResult.success ? activeResult.template.name : null;
                    
                    // Update template dropdown
                    const select = document.getElementById('templateSelect');
                    select.innerHTML = ''; // Clear existing options
                    
                    // Add built-in templates
                    const builtInTemplates = [
                        { value: 'luxury', text: 'üè∞ Luxury Properties' },
                        { value: 'firsttime', text: 'üè† First-Time Buyers' },
                        { value: 'expat', text: 'üåç Expat Relocation' },
                        { value: 'investor', text: 'üíé Smart Investors' }
                    ];
                    
                    builtInTemplates.forEach(template => {
                        const option = document.createElement('option');
                        option.value = template.value;
                        option.textContent = template.value === activeTemplateName ? 
                            `‚≠ê ${template.text} (ACTIVE)` : template.text;
                        select.appendChild(option);
                    });
                    
                    // Add database templates
                    result.templates.forEach(template => {
                        if (!builtInTemplates.find(t => t.value === template.name)) {
                            const option = document.createElement('option');
                            option.value = template.name;
                            option.textContent = template.name === activeTemplateName ? 
                                `‚≠ê üìù ${template.name} (ACTIVE)` : `üìù ${template.name}`;
                            select.appendChild(option);
                        }
                    });
                    
                    showStatus(`‚úÖ Loaded ${result.templates.length} templates from database${activeTemplateName ? ` (Active: ${activeTemplateName})` : ''}`, 'success');
                } else {
                    showStatus(`‚ö†Ô∏è Could not load templates from database: ${result.error}`, 'warning');
                }
            } catch (error) {
                showStatus(`‚ö†Ô∏è Error loading templates from database: ${error.message}`, 'warning');
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Set default language
            document.getElementById('language').value = 'ar';
            currentLanguage = 'ar';
            
            // Load templates from database first, then load messages
            loadAllTemplatesFromDatabase().then(() => {
                loadAllMessages();
            });
        });
    </script>
</body>
</html>
